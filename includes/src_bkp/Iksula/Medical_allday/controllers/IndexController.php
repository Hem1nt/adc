<?php/*** aheadWorks Co. * * NOTICE OF LICENSE * * This source file is subject to the EULA * that is bundled with this package in the file LICENSE.txt. * It is also available through the world-wide-web at this URL: * http://ecommerce.aheadworks.com/AW-LICENSE-COMMUNITY.txt * * ================================================================= *                 MAGENTO EDITION USAGE NOTICE * ================================================================= * This package designed for Magento COMMUNITY edition * aheadWorks does not guarantee correct work of this extension * on any other Magento edition except Magento COMMUNITY edition. * aheadWorks does not provide extension support in case of * incorrect edition usage. * ================================================================= * * @category   AW * @package    AW_Searchautocomplete * @version    3.2.2 * @copyright  Copyright (c) 2010-2012 aheadWorks Co. (http://www.aheadworks.com) * @license    http://ecommerce.aheadworks.com/AW-LICENSE-COMMUNITY.txt */class Iksula_Medical_IndexController  extends Mage_Core_Controller_Front_Action{	 public function indexAction()	 {/*	   $medicalhistoryObj = Mage::getModel('medicalhistory/medicalhistorynew')->getCollection();	   	 echo "<pre>";	   print_r($medicalhistoryObj->getData());*/	     $params = $this->getRequest()->getParams();		 //echo "<pre>";		 //print_r($params);exit;		 for($i=1;$i<=14;$i++)		 {		   //echo "---".$this->getRequest()->getParam('option_'.$i);		   if($this->getRequest()->getParam('option_'.$i) != "")		   {		      if($this->getRequest()->getParam('option_'.$i) == '1')			  {			     $qt .= $i.",";			  }		   }		 }	// 	 echo "<pre>";	// 	 if($customer = Mage::getSingleton('customer/session')->isLoggedIn()) {	// 		 $customer = Mage::getSingleton('customer/session')->getCustomer();	// 		 $customerData = Mage::getModel('customer/customer')->load($customer->getId())->getData();	//    		// print_r($customerData);	// 	}	// //	 print_r($qt);	// 	 echo "<pre>";	// 	 print_r($params);exit;		 $name = $this->getRequest()->getParam('phy_name');		 $phoneno = $this->getRequest()->getParam('phy_phone');		 $pr_name = $this->getRequest()->getParam('med_1');		 $pr_freq = $this->getRequest()->getParam('med_freq_1');		 $pr_dur = $this->getRequest()->getParam('med_dur_1');		 $dur_alg = $this->getRequest()->getParam('med_dur_alg');		 $optiontext = $this->getRequest()->getParam('option_text');		 $option = $this->getRequest()->getParam('option');		 		 $medicalhistoryObj = Mage::getModel('medicalhistory/medicalhistory');		  		 try{				 $medicalhistoryObj->setName($name);				 $medicalhistoryObj->setPhonenumber($phoneno);				 $medicalhistoryObj->setProductName($pr_name);				 $medicalhistoryObj->setFrequency($pr_freq);				 $medicalhistoryObj->setDuration($pr_dur);				 $medicalhistoryObj->setDrugAllergies($dur_alg);				 $medicalhistoryObj->setQuestionid($option);				 $medicalhistoryObj->setOptionText($optiontext);								 $medicalhistoryObj->save();				 Mage::getSingleton('core/session')->setMedicalrow('yes');	    }		catch(Mage_Core_Exception $e){			 echo "fail";		}		  echo "success";		 	 }	 /*	 *	author @ Manoj Chaurasia	 *	input takes medical history of user and store in database	 *	output last insert id	 *	return id which is store in session	 */    public function storemedicalhistoryAction()	 {	 	//echo 'manoj';	 	 $data = $this->getRequest()->getParams();	 	 $drug_allergies = $this->getRequest()->getParam('drug_allergies');	 	 //print_r($data);		 $model = Mage::getModel('medical/medical');		 $model->setData($data);			 		 try {		 		$insertId = $model->save()->getId();		   		Mage::getSingleton('core/session')->setInsertId($insertId);		   		$myValue=Mage::getSingleton('core/session')->getInsertId();		   		//Mage::getSingleton('core/session')->unsInsertId();		   		echo 'success';		} 		 catch (Exception $e){		   		echo $e->getMessage();		}				 	 }}