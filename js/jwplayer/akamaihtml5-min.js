function AkaHTML5MediaAnalytics(cc){var cM="$Id: //projects/agents/analytics-player-html5-plugin-3.5/akamai/analytics-player-html5-plugin/akamaihtml5.js#8 $";function D(){return(((1+Math.random())*65536)|0).toString(16).substring(1)}function cN(){return(D()+D()+"-"+D()+"-"+D()+"-"+D()+"-"+D()+D()+D())}var bk=bk||function(cV,cT){var cW={},cY=cW.lib={},cP=cY.Base=function(){function c0(){}return{extend:function(c1){c0.prototype=this;var c2=new c0;c1&&c2.mixIn(c1);c2.$super=this;return c2},create:function(){var c1=this.extend();c1.init.apply(c1,arguments);return c1},init:function(){},mixIn:function(c1){for(var c2 in c1){c1.hasOwnProperty(c2)&&(this[c2]=c1[c2])}c1.hasOwnProperty("toString")&&(this.toString=c1.toString)},clone:function(){return this.$super.extend(this)}}}(),cQ=cY.WordArray=cP.extend({init:function(c0,c1){c0=this.words=c0||[];this.sigBytes=c1!=cT?c1:4*c0.length},toString:function(c0){return(c0||cX).stringify(this)},concat:function(c1){var c2=this.words,c4=c1.words,c3=this.sigBytes,c1=c1.sigBytes;this.clamp();if(c3%4){for(var c0=0;c0<c1;c0++){c2[c3+c0>>>2]|=(c4[c0>>>2]>>>24-8*(c0%4)&255)<<24-8*((c3+c0)%4)}}else{if(65535<c4.length){for(c0=0;c0<c1;c0+=4){c2[c3+c0>>>2]=c4[c0>>>2]}}else{c2.push.apply(c2,c4)}}this.sigBytes+=c1;return this},clamp:function(){var c0=this.words,c1=this.sigBytes;c0[c1>>>2]&=4294967295<<32-8*(c1%4);c0.length=cV.ceil(c1/4)},clone:function(){var c0=cP.clone.call(this);c0.words=this.words.slice(0);return c0},random:function(c0){for(var c1=[],c2=0;c2<c0;c2+=4){c1.push(4294967296*cV.random()|0)}return cQ.create(c1,c0)}}),e=cW.enc={},cX=e.Hex={stringify:function(c1){for(var c2=c1.words,c1=c1.sigBytes,c4=[],c0=0;c0<c1;c0++){var c3=c2[c0>>>2]>>>24-8*(c0%4)&255;c4.push((c3>>>4).toString(16));c4.push((c3&15).toString(16))}return c4.join("")},parse:function(c1){for(var c2=c1.length,c3=[],c0=0;c0<c2;c0+=2){c3[c0>>>3]|=parseInt(c1.substr(c0,2),16)<<24-4*(c0%8)}return cQ.create(c3,c2/2)}},cS=e.Latin1={stringify:function(c1){for(var c2=c1.words,c1=c1.sigBytes,c0=[],c3=0;c3<c1;c3++){c0.push(String.fromCharCode(c2[c3>>>2]>>>24-8*(c3%4)&255))}return c0.join("")},parse:function(c1){for(var c0=c1.length,c3=[],c2=0;c2<c0;c2++){c3[c2>>>2]|=(c1.charCodeAt(c2)&255)<<24-8*(c2%4)}return cQ.create(c3,c0)}},cR=e.Utf8={stringify:function(c1){try{return decodeURIComponent(escape(cS.stringify(c1)))}catch(c0){throw Error("Malformed UTF-8 data")}},parse:function(c0){return cS.parse(unescape(encodeURIComponent(c0)))}},cU=cY.BufferedBlockAlgorithm=cP.extend({reset:function(){this._data=cQ.create();this._nDataBytes=0},_append:function(c0){"string"==typeof c0&&(c0=cR.parse(c0));this._data.concat(c0);this._nDataBytes+=c0.sigBytes},_process:function(c1){var c0=this._data,c6=c0.words,c5=c0.sigBytes,c2=this.blockSize,c3=c5/(4*c2),c3=c1?cV.ceil(c3):cV.max((c3|0)-this._minBufferSize,0),c1=c3*c2,c5=cV.min(4*c1,c5);if(c1){for(var c4=0;c4<c1;c4+=c2){this._doProcessBlock(c6,c4)}c4=c6.splice(0,c1);c0.sigBytes-=c5}return cQ.create(c4,c5)},clone:function(){var c0=cP.clone.call(this);c0._data=this._data.clone();return c0},_minBufferSize:0});cY.Hasher=cU.extend({init:function(){this.reset()},reset:function(){cU.reset.call(this);this._doReset()},update:function(c0){this._append(c0);this._process();return this},finalize:function(c0){c0&&this._append(c0);this._doFinalize();return this._hash},clone:function(){var c0=cU.clone.call(this);c0._hash=this._hash.clone();return c0},blockSize:16,_createHelper:function(c0){return function(c1,c2){return c0.create(c2).finalize(c1)}},_createHmacHelper:function(c0){return function(c1,c2){return cZ.HMAC.create(c0,c2).finalize(c1)}}});var cZ=cW.algo={};return cW}(Math);(function(){var cR=bk,cQ=cR.lib,cS=cQ.WordArray,cQ=cQ.Hasher,cP=[],e=cR.algo.SHA1=cQ.extend({_doReset:function(){this._hash=cS.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(cY,cT){for(var c0=this._hash.words,cV=c0[0],cU=c0[1],cW=c0[2],cX=c0[3],c2=c0[4],cZ=0;80>cZ;cZ++){if(16>cZ){cP[cZ]=cY[cT+cZ]|0}else{var c1=cP[cZ-3]^cP[cZ-8]^cP[cZ-14]^cP[cZ-16];cP[cZ]=c1<<1|c1>>>31}c1=(cV<<5|cV>>>27)+c2+cP[cZ];c1=20>cZ?c1+((cU&cW|~cU&cX)+1518500249):40>cZ?c1+((cU^cW^cX)+1859775393):60>cZ?c1+((cU&cW|cU&cX|cW&cX)-1894007588):c1+((cU^cW^cX)-899497514);c2=cX;cX=cW;cW=cU<<30|cU>>>2;cU=cV;cV=c1}c0[0]=c0[0]+cV|0;c0[1]=c0[1]+cU|0;c0[2]=c0[2]+cW|0;c0[3]=c0[3]+cX|0;c0[4]=c0[4]+c2|0},_doFinalize:function(){var cT=this._data,cV=cT.words,cW=8*this._nDataBytes,cU=8*cT.sigBytes;cV[cU>>>5]|=128<<24-cU%32;cV[(cU+64>>>9<<4)+15]=cW;cT.sigBytes=4*cV.length;this._process()}});cR.SHA1=cQ._createHelper(e);cR.HmacSHA1=cQ._createHmacHelper(e)})();(function(){var cP=bk,e=cP.enc.Utf8;cP.algo.HMAC=cP.lib.Base.extend({init:function(cW,cY){cW=this._hasher=cW.create();"string"==typeof cY&&(cY=e.parse(cY));var cV=cW.blockSize,cR=4*cV;cY.sigBytes>cR&&(cY=cW.finalize(cY));for(var cQ=this._oKey=cY.clone(),cX=this._iKey=cY.clone(),cT=cQ.words,cS=cX.words,cU=0;cU<cV;cU++){cT[cU]^=1549556828,cS[cU]^=909522486}cQ.sigBytes=cX.sigBytes=cR;this.reset()},reset:function(){var cQ=this._hasher;cQ.reset();cQ.update(this._iKey)},update:function(cQ){this._hasher.update(cQ);return this},finalize:function(cR){var cQ=this._hasher,cR=cQ.finalize(cR);cQ.reset();return cQ.finalize(this._oKey.clone().concat(cR))}})})();(function(){var cS=bk,cR=cS.lib,cT=cR.Base,cP=cR.WordArray,cR=cS.algo,e=cR.HMAC,cQ=cR.PBKDF2=cT.extend({cfg:cT.extend({keySize:4,hasher:cR.SHA1,iterations:1}),init:function(cU){this.cfg=this.cfg.extend(cU)},compute:function(c2,c4){for(var c1=this.cfg,cY=e.create(c1.hasher,c2),c0=cP.create(),cZ=cP.create([1]),c6=c0.words,c3=cZ.words,c5=c1.keySize,c1=c1.iterations;c6.length<c5;){var cX=cY.update(c4).finalize(cZ);cY.reset();for(var cV=cX.words,c8=cV.length,cU=cX,c9=1;c9<c1;c9++){cU=cY.finalize(cU);cY.reset();for(var c7=cU.words,cW=0;cW<c8;cW++){cV[cW]^=c7[cW]}}c0.concat(cX);c3[0]++}c0.sigBytes=4*c5;return c0}});cS.PBKDF2=function(cU,cW,cV){return cQ.create(cV).compute(cU,cW)}})();function bP(cV,cS){if(cV==null||cV==""){return}var cQ=/(\w+):\/\/([^\/:]+):?([^\/]+)?(\/[^#?]*)#?([^?]+)?\??(.+)?/;try{var cP=cQ.exec(cV);cS.protocol=cP[1];cS.hostName=cP[2];cS.port=cP[3]?cP[3]:"80";cS.path=cP[4];var cU=cS.path.split("/");var cR=cU.length;cS.streamName=cU[cR-1];if(cS.streamName.indexOf(".m3u")!=-1){if(cR>=3){cS.streamName=cU[cR-2]+"/"+cU[cR-1]}}cS.hash=cP[5]?cP[5]:"";cS.search=cP[6]?cP[6]:"";cS.host=cS.hostName+":"+cS.port}catch(cT){br("Exception,  parseStreamUrl :"+cT)}}function bI(){return new Date().getTime()}var S=false;if(window){try{S=window.XDomainRequest?true:false}catch(bO){S=false}}var a1={};var R={};var bc=null;var bZ={eventCode:"",beaconId:"",sequenceId:"",logType:"",endOfStream:"",logVersion:"",formatVersion:"",visitId:"",errorCode:"",partNumber:"",totalParts:"",hostName:"",streamName:"",port:"",protocol:"",userAgent:"",playerType:"",os:"",format:"",connectTime:"",bufferingTime:"",startupTime:"",streamLength:"",bytesTotal:"",browser:"",browserSize:"",videoSize:"",streamUrl:"",deliveryType:"",pluginVersion:"",beaconVersion:"",serverIp:"",playerFormat:"",outlierStartupTime:"",isFirstTitle:"",rebufferSessionH:"",sequenceIdH:"",isSessionWithRebufferH:"",playerState:"",currentStreamTime:"",currentClockTime:"",playClockTime:"",playStreamTime:"",rebufferCount:"",rebufferTime:"",pauseCount:"",pauseDuration:"",pauseIntervalsAsString:"",seekCount:"",seekTime:"",seekIntervalsAsString:"",pauseSeekSession:"",resumeBufferCount:"",resumeBufferTime:"",isView:"",isSessionWithRebuffer:"",logInterval:"",rebufferSession:"",socialSharing:"",endReasonCode:"",totalPlayClockTime:"",totalPlayStreamTime:"",totalRebufferCount:"",totalRebufferTime:"",totalAdPlayClockTime:"",totalAdStartCount:"",totalAdAbandonCount:"",lastHTime:"",isVisitStart:"",isVisitEnd:"",visitAttempts:"",visitPlays:"",visitViews:"",visitErrors:"",visitInterval:"",visitPlayClockTime:"",visitPlayStreamTime:"",visitRebufferCount:"",visitRebufferTime:"",visitStartupErrors:"",visitAdPlayClockTime:"",visitAdStartCount:"",visitAdAbandonCount:"",visitUniqueTitles:"",adAbandonCount:"",adPauseTime:"",adStartupTime:"",adPlayClockTime:"",adCount:"",adSession:"",sessionId:"",attemptId:"",playerReferrer:"",ais_idpId:"",ais_idpName:"",ais_idpDisplayName:"",ais_idpUrl:"",ais_queryToken:"",ais_aisuid:"",qualityOfExperience:"",transitionStreamTimeSession:"",transitionUpSwitchCount:"",transitionDownSwitchCount:"",averagedBitRate:""};var b8={title:false,category:false,subCategory:false,show:false,contentLength:false,contentType:false,device:false,deliveryType:false,playerId:false,eventName:false};var ax={};var bY={};ax.isBrightcoveVideo=false;ax.objectBased=false;ax.videoPassed=false;var af=false;var K=false;var aJ=false;var au={};var bw={};var cg=false;var cv=[];var a6={timer:null,queue:[],browserClose:false,enabled:true,time:250};var bl={};var bg=[];var aM={};var bv={};var l={};var aE={};var b7={};var ad={};var bG={};var F=100;var cd={};var X=false;var c={fastTCPFailed:false,fastTCPEnabled:false};var ca=[];var bd={};bd.dataSent={};var bN=1;var aC=-1;var bX={};var u=[];var H={pageURLCsmaDebug:0,configURLCsmaDebug:0,configDebug:0,windowOpened:false,logStoredMsg:true,printException:false};function ah(){this.aisRetries=0;this.aisRequestLimit=3;this.aisRequestInterval=30000;this.requestFailed=false}var bM=new ah();var x={setDataArr:["adId","adDuration","adTitle","adCategory","adPartnerId","adServer","adDaypart","adIndustryCategory","adEvent"],clearAdAnalytics:function(){this.isAdLoaded=false;this.isAdStarted=false;this.id="";this.type="0";this.startPos="0";this.playBucket="-1";this.endStatus="2";this.adLoadTime=null;this.adStartTime=null;this.adStartupTime="0";for(var e=0;e<this.setDataArr.length;e++){this[this.setDataArr[e]]=""}}};var bU={bitRateArr:[],currentBitRate:"-",currentStartPos:0,bitRateCount:{},bitRatePlayTime:{},bitRateBucketMap:{},clearBitRate:function(){this.bitRateArr=[];this.currentBitRate="-";this.bitRateCount={};this.bitRatePlayTime={}},updateBitRateArr:function(cQ){if(this.bitRateArr.length>0){var e=this.bitRateArr.length;var cP=bU.bitRateArr[e-1];if((this.currentBitRate==cP.bitRate)){cP.playTime+=cQ}else{this.pushInBitRateArr(cQ,this.currentBitRate,this.currentStartPos)}}else{this.pushInBitRateArr(cQ,this.currentBitRate,this.currentStartPos)}},pushInBitRateArr:function(cQ,e,cP){this.bitRateArr.push({bitRate:e,playTime:cQ,startPos:cP})},populateBitRateBucketMap:function(e,cT){var cQ,cR=false;var cP=bG.bitRateBucketTimes;if(e!="-"&&e!==""){e=parseInt(e/1000)}for(var cS in cP){cR=false;cQ=cP[cS];if(e=="-"||e===""||e<0){if(!cQ.max&&!cQ.min){cR=true;break}}else{if(cQ.max&&cQ.min){if(e>=cQ.min&&e<cQ.max){cR=true;break}}else{if(cQ.max){if(e<cQ.max){cR=true;break}}else{if(cQ.min){if(e>=cQ.min){cR=true;break}}}}}}if(cR){this.bitRateBucketMap[cS]+=cT}},findMaxPersistentBitRate:function(){try{if(this.bitRatePlayTime){var cP=0,cQ=-1;for(var cR in this.bitRatePlayTime){if(this.bitRatePlayTime[cR]>cQ){cQ=this.bitRatePlayTime[cR];cP=cR}}if(cP!==0){return cP}}}catch(cS){br("Exception, find max persistent bit rate")}},getTransitionSession:function(cV){try{var cR=null;var cQ,cZ,cS="";var cT=0,cW,cY=0,cP=0;var cU=true;if(this.bitRateArr.length>0){cQ=this.bitRateArr[0];if(cQ.bitRate=="-"){cU=false;if(this.bitRateArr[1]&&this.bitRateArr[1].bitRate!="-"){cU=true;this.bitRateArr[1].startPos=this.bitRateArr[0].startPos;this.bitRateArr[1].playTime+=this.bitRateArr[0].playTime;this.bitRateArr.shift()}}}for(cZ in this.bitRateBucketMap){this.bitRateBucketMap[cZ]=0}for(cT=0;cT<this.bitRateArr.length;cT++){cQ=this.bitRateArr[cT];if(cQ.bitRate in this.bitRateCount){if(cT!=0){this.bitRateCount[cQ.bitRate]++}}else{this.bitRateCount[cQ.bitRate]=1}if(cQ.bitRate!=""&&cQ.bitRate!="-"){if(cQ.bitRate in this.bitRatePlayTime){this.bitRatePlayTime[cQ.bitRate]+=cQ.playTime}else{this.bitRatePlayTime[cQ.bitRate]=cQ.playTime}}cW=this.bitRateCount[cQ.bitRate];if(cR){cR+=","+cQ.bitRate+":"+cQ.startPos+":"+cQ.playTime+"::"+cW}else{cR=cQ.bitRate+":"+cQ.startPos+":"+cQ.playTime+"::"+cW}this.populateBitRateBucketMap(cQ.bitRate,cQ.playTime);try{if(cU){cY+=cQ.bitRate*cQ.playTime;cP+=cQ.playTime}}catch(cX){}}cV.maxPersistentBitRate=this.findMaxPersistentBitRate();cV.transitionStreamTimeSession=cR;for(cZ in this.bitRateBucketMap){if(cS){cS+=","+cZ+":"+this.bitRateBucketMap[cZ]}else{cS=cZ+":"+this.bitRateBucketMap[cZ]}}cV.bitRateBucketTimes=cS;try{if(cU&&cP&&cP!=0){cV.averagedBitRate=cY+":"+cP}}catch(cX){}}catch(cX){br("Exception, get transition Session :"+cX)}}};var bo="";var cL=function(){if(typeof(akamaiBCVideoObject)!="undefined"){try{var cV=document.getElementsByTagName("script");var cT=0;var cR="";if(cV.length){for(cT=0;cT<cV.length;cT++){if((cV[cT].src!=null)&&((cV[cT].src.indexOf("79423.analytics.edgesuite.net")!=-1)||(cV[cT].src.indexOf("79423.analytics.edgekey.net")!=-1))){bo=cV[cT].src;cR=E("configPath",cV[cT].src);if(cR!=""){au.url=cR}}}}}catch(cU){}}else{au.url=AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH}if(au.url){var cW=parseInt(E("enableGenericAPI",au.url));if(cW==1){ax.objectBased=true}au.beaconSent=parseInt(E("beaconSentNotify",au.url));var cQ=parseInt(E("setVideoObject",au.url));if(cQ==1){ax.videoPassed=true}var cP=parseInt(E("subscribeVideo",au.url));if(cP==1){ax.videoPassed=true}var cS=parseInt(E("exception",au.url));if(cS==1){H.printException=true}H.configURLCsmaDebug=parseInt(E("debug",au.url))}}();function bp(){var cU=false;try{if(window!==window.parent){var cQ={};var cR={};var cP=document.URL;var cT=null;if(document&&document.referrer){cT=document.referrer}if(cP!=null){bP(cP,cQ)}if(cT!=null){bP(cT,cR)}if(cQ.port===cR.port&&cQ.protocol===cR.protocol&&cQ.hostName===cR.hostName){cU=true}}else{cU=true}}catch(cS){}return cU}try{if(window){if(bp()){H.pageURLCsmaDebug=parseInt(E("AkamaiAnalytics_debug",window.parent.location))}else{H.pageURLCsmaDebug=parseInt(E("AkamaiAnalytics_debug",window.location))}}}catch(bO){}try{var bA="";var cC="";regex=/-([0-9\.]+)/;match=regex.exec(cM);bA=match[1]?match[1]:"1.0";regex=/#([0-9]+)/;match=regex.exec(cM);cC=match?(match[1]?match[1]:"0"):"0";bA=bA+"."+cC;if(typeof(akamaiBCVideoObject)!="undefined"&&typeof(brightcovePerforceVersion)!="undefined"){a3("std:pluginVersion","Brightcove-"+brightcovePerforceVersion)}}catch(bO){br("Exception,  pluginVersion: "+bO);bA="1.0"}function cu(){var cU=false;try{var cQ=document.URL;var cR=/(\w+):\/\/([^\/:]+):?([^\/]+)?(\/[^#?]*)#?([^?]+)?\??(.+)?/;var cP=cR.exec(cQ);var cT=cP[1];if(cT=="https"){cU=true}}catch(cS){}return cU}function aL(){if(H.windowOpened){return}if(H.pageURLCsmaDebug==1||H.configURLCsmaDebug==1||H.configDebug==1){if(typeof AkamaiAnalytics_debugWindow_available=="function"&&AkamaiAnalytics_debugWindow_available()=="1"){return}var e="HTML5-"+bA;if("pluginVersion" in R){e=e+":"+R.pluginVersion}AkamaiAnalytics_debugWindow_data={version:e};if(cu()){o("https://79423.analytics.edgekey.net/csma/debug/DebugWindow.js","AkamaiAnalytics_debug");cz(j,"https://79423.analytics.edgekey.net/plugins/release-details/latest/html5.xml",false)}else{o("http://79423.analytics.edgesuite.net/csma/debug/DebugWindow.js","AkamaiAnalytics_debug");cz(j,"http://79423.analytics.edgesuite.net/plugins/release-details/latest/html5.xml",false)}H.windowOpened=true;V()}}aL();function V(){try{var cP=au.url.toLowerCase();var cR="";if(cP.indexOf(".edgesuite.net/")==-1&&cP.indexOf(".edgekey.net/")==-1){cR="Incorrect Beacon XML Path";cR+="<ul style='list-style-type:circle;margin:0'>";cR+="<li>We have identified that the Beacon XML in not loaded from an Akamai Domain.</li>";cR+="<li>Kindly use the same Beacon XML path that is provided in SOLA Anlaytics UI while provisioning.</li></ul>";br(cR,"ERROR")}}catch(cQ){}}function bx(){try{var cQ=l.beaconUrl.toLowerCase();var cR="";if(cQ.indexOf(".edgesuite.net/")==-1&&cQ.indexOf(".edgekey.net/")==-1){cR="Beacons sent to incorrect domain : "+cQ;cR+="<ul style='list-style-type:circle;margin:0'>";cR+="<li>We have identified that the beacons are not sent to an Akamai Domain.</li>";cR+="<li>Kindly use the proper Beacon XML path that is provided in SOLA Anlaytics UI while provisioning.</li></ul>";br(cR,"ERROR")}}catch(cP){}}function aQ(){try{var cP="";for(var cR in b8){if(b8[cR]){if(!(cR in a1)){if(cP){cP+=", "+cR}else{cP=cR}}}}if(cP){cP="Following dimensons have not being set : "+cP;cP+="<ul style='list-style-type:circle;margin:0'>";cP+="<li>Please refer 'Set Custom Data' section in Integration guide for more details.</li></ul>";br(cP,"INTEGRATION")}}catch(cQ){}}function j(cZ){try{var cQ=cZ.readyState;var c3=cZ.status;if(cQ==4&&c3==200){var cP=cZ.responseXML;if(cP){var cW;if(cP.documentElement){cW=cP.documentElement}else{cW=cP}if(cW){var cX=document.getElementsByTagName("script");var c4=0;var cY=false;var cT="";var c1="";if(typeof(akamaiBCVideoObject)!="undefined"){if(bo){cY=true;c1=bo}}else{if(cX.length){for(c4=0;c4<cX.length;c4++){if((cX[c4].src!=null)){if((cX[c4].src.indexOf("79423.analytics.edgesuite.net/html5/akamaihtml5-min.js")!=-1)||(cX[c4].src.indexOf("79423.analytics.edgekey.net/html5/akamaihtml5-min.js")!=-1)){cY=true;c1=cX[c4].src}}}}}var cR="";if(typeof(akamaiBCVideoObject)!="undefined"){cR=cW.getElementsByTagName("brightcove")[0]}else{cR=cW.getElementsByTagName("plugin")[0]}if(cR){var c7=cR.getAttribute("name");var cS=cR.getAttribute("version");var cV=cR.getAttribute("link");var c0=cR.getAttribute("size");var cU=cR.getAttribute("date");var c2="";br("Integration Type : "+c7,"INTEGRATION");if(cY){br("Plugin path is correct ["+c1+"]","INTEGRATION")}else{c2="Incorrect Plugin Path";c2+="<ul style='list-style-type:circle;margin:0'>";c2+="<li>Kindly refer the Integration Guide and use the correct plugin path for integration</li>";c2+="<li>The plugin path should be one of the below :</li>";if(typeof(akamaiBCVideoObject)!="undefined"){c2+="<ul><li>http://79423.analytics.edgesuite.net/html5/brightcoveAkamaihtml5-min.js</li>";c2+="<li>https://79423.analytics.edgekey.net/html5/brightcoveAkamaihtml5-min.js</li></ul>"}else{c2+="<ul><li>http://79423.analytics.edgesuite.net/html5/akamaihtml5-min.js</li>";c2+="<li>https://79423.analytics.edgekey.net/html5/akamaihtml5-min.js</li></ul>"}c2+="</ul>";br(c2,"ERROR")}var c6=bT(bA,cS);if(c6>=0){br("Plugin is Latest (Version = "+bA+" )","INTEGRATION")}else{c2="Old Plugin Version";c2+="<ul style='list-style-type:circle;margin:0'>";c2+="<li>Current Plugin Version is "+bA+"</li>";c2+="<li>The latest plugin version in "+cS+" which was released on date "+cU+"</li>";c2+="<li>Kindly check if proper path mentioned in integration guide is used for integration</li>";c2+="<li>If proper path is used, try by clearing browser cache.</li>";br(c2,"ERROR")}}}}}}catch(c5){}}function bT(cP,cV){try{var cS=0;if(cP!=null&&cV!=null){var cT=cP.split(".");var cQ=cV.split(".");while(cT.length>cQ.length){cQ.push(0)}while(cQ.length>cT.length){cT.push(0)}for(var cR=0;cR<cT.length;cR++){if(parseInt(cT[cR])>parseInt(cQ[cR])){cS=1;break}if(parseInt(cT[cR])<parseInt(cQ[cR])){cS=-1;break}}}}catch(cU){}return cS}function b9(cR,cP,e){var cQ;if(S){cQ=new XDomainRequest();cQ.onload=function(){br("XML Request : xmlClient.onload");cR("4","200",cQ.responseText)};cQ.onerror=function(cS){br("Error, ais request")};cQ.open("GET",cP,e);cQ.send(null)}else{cQ=new XMLHttpRequest();cQ.responseType="json";cQ.open("GET",cP,e);if(cQ.overrideMimeType){cQ.overrideMimeType("application/json")}cQ.onreadystatechange=function(){cR(cQ.readyState,cQ.status,cQ.responseText)};cQ.send(null)}}function cz(cQ,e,cP){if(aJ){}else{aK(cQ,e,cP)}}function aK(cS,cP,cR){if(cS){br("XML Request: isXDomainRequest = "+S+":::funcCallback =  :url: "+cP)}var cQ;if(cP==null||cP=="undefined"||cP==""){return}try{if(S){cQ=new XDomainRequest();if(cS){cQ.onload=function(){br("XML Request : xmlClient.onload");if(window.DOMParser){var cV=new DOMParser();var cU=cV.parseFromString(cQ.responseText,"text/xml");var e={};e.status="200";e.readyState="4";e.responseXML=cU;e.responseText=cQ.responseText;cS(e)}else{var cU=new ActiveXObject("Microsoft.XMLDOM");cU.async=false;cU.loadXML(cQ.responseText);var e={};e.status="200";e.readyState="4";e.responseXML=cU;cS(e)}};cQ.onerror=function(cU){br("XML Request : Error, loading xml. url = :"+cP);if(cP.indexOf("serverIp")!=-1){X=true}if(cP.indexOf("protocol-info")!=-1){c.fastTCPFailed=true}}}cQ.open("GET",cP,!cR);cQ.send(null)}else{cQ=new XMLHttpRequest();cQ.open("GET",cP,!cR);if(cS){if(cQ.overrideMimeType){cQ.overrideMimeType("text/xml")}cQ.onreadystatechange=function(){br("XML Request : xmlClient.onreadystatechange");cS(cQ)}}cQ.send(null)}}catch(cT){br("Exception,  XML Request for url :"+cP+",Exception:"+cT)}}function al(c5){var cS=c5.readyState;var db=c5.status;br("readConfig: readyState = "+cS+":::status = "+db);try{if(cS==4&&db==200){var cQ=c5.responseXML;if(cQ){var cZ;if(cQ.documentElement){cZ=cQ.documentElement}else{cZ=cQ}var df=cZ.getElementsByTagName("dataMetrics");for(var c8=0;c8<df.length;++c8){var c9=df[c8];var c2=c9.parentNode;var cR=c2.nodeName;bg[c8]=cR;var da=bl[cR]=[];var cU=c2.getAttribute("eventCode");if(cU){ad[cR]=cU}var c0=c9.getElementsByTagName("data");for(var dg=0;dg<c0.length;++dg){var cV=c0[dg];cR=cV.getAttribute("name");var cT=cV.getAttribute("key");cU=cV.getAttribute("value");var cY=cV.getAttribute("sendOnce");var de=cV.getAttribute("fallback");var cP=cV.getAttribute("size");var c7=cV.getAttribute("regExp");var dd={};dd.name=cR;dd.key=cT;if(cR in b8){b8[cR]=true}else{if(cT.indexOf("_cd_")!=-1){b8[cR]=true}}if(cU){dd.value=cU}if(cY){dd.isSent=false;dd.sendOnce=cY}if(de){dd.fallback=de}if(cP){dd.size=cP}if(c7){dd.regExp=c7}da.push(dd)}}H.configDebug=parseInt(cZ.getAttribute("debug"));if(H.configDebug!=1){H.configDebug=0}if(H.configDebug==1){aL()}if(cZ.getElementsByTagName("isActive")[0]&&cZ.getElementsByTagName("isActive")[0].childNodes[0]){bN=cZ.getElementsByTagName("isActive")[0].childNodes[0].nodeValue}aM.beaconId=cZ.getElementsByTagName("beaconId")[0].childNodes[0].nodeValue;aM.beaconVersion=cZ.getElementsByTagName("beaconVersion")[0].childNodes[0].nodeValue;var dh=cZ.getElementsByTagName("logTo")[0];l.logType=dh.getAttribute("logType");if(!l.logType){l.logType="relative"}l.logInterval=dh.getAttribute("logInterval")*1000;if(!l.logInterval){l.loginterval=300*1000}l.heartBeatInterval=dh.getAttribute("heartBeatInterval")*1000;if(!l.heartBeatInterval){l.heartBeatInterval=60*1000}l.secondaryLogTime=dh.getAttribute("secondaryLogTime")*1000;if(!l.secondaryLogTime){l.secondaryLogTime=15*1000}l.isSessionWithRebufferLimit=dh.getAttribute("isSessionWithRebufferLimit");if(!l.isSessionWithRebufferLimit){l.isSessionWithRebufferLimit=500}l.fastTCPEnabled=dh.getAttribute("fastTCPEnabled");if(!l.fastTCPEnabled){l.fastTCPEnabled=0}if(l.fastTCPEnabled==1){c.fastTCPEnabled=true}l.aisRequestLimit=dh.getAttribute("aisRequestLimit");if(!l.aisRequestLimit){l.aisRequestLimit=3}if(bM){bM.aisRequestLimit=l.aisRequestLimit}l.aisRequestInterval=dh.getAttribute("aisRequestInterval")*1000;if(!l.aisRequestInterval){l.aisRequestInterval=30*1000}if(bM){bM.aisRequestInterval=l.aisRequestInterval}l.startupTimeOutlierLimit=dh.getAttribute("startupTimeOutlierLimit")*1000;if(!l.startupTimeOutlierLimit){l.startupTimeOutlierLimit=600*1000}l.visitTimeout=dh.getAttribute("visitTimeout")*60*1000;if(!l.visitTimeout){l.visitTimeout=60*60*1000}l.urlParamSeparator=dh.getAttribute("urlParamSeparator");if(!l.urlParamSeparator){l.urlParamSeparator="~"}l.encodedParamSeparator=dh.getAttribute("encodedParamSeparator");if(!l.encodedParamSeparator){l.encodedParamSeparator="*@*"}l.initBrowserCloseTime=dh.getAttribute("initBrowserCloseTime");if(!l.initBrowserCloseTime){l.initBrowserCloseTime=15*60*1000}var cX=dh.getAttribute("delayTimer");if(cX){a6.time=cX}var c4=dh.getAttribute("disableDelay");if(c4==1){a6.enabled=false}l.beaconUrl=dh.getElementsByTagName("host")[0].childNodes[0].nodeValue;if((l.beaconUrl.indexOf("http://")==-1)&&(l.beaconUrl.indexOf("https://")==-1)){l.beaconUrl="http://"+l.beaconUrl}l.beaconUrl+=dh.getElementsByTagName("path")[0].childNodes[0].nodeValue;l.maxLogLineLength=dh.getAttribute("maxLogLineLength");if(!l.maxLogLineLength){l.maxLogLineLength=2048}l.maxLogLineLength-=l.beaconUrl.length;l.logVersion=dh.getElementsByTagName("logVersion")[0].childNodes[0].nodeValue;l.formatVersion="1.1";if(dh.getElementsByTagName("formatVersion")&&dh.getElementsByTagName("formatVersion")[0]&&dh.getElementsByTagName("formatVersion")[0].childNodes[0]){l.formatVersion=dh.getElementsByTagName("formatVersion")[0].childNodes[0].nodeValue}l.useKey=parseInt(cZ.getElementsByTagName("statistics")[0].getAttribute("useKey"));var dc=cZ.getElementsByTagName("feedback")[0];if(dc!=null&&dc!==""){bd.shouldSendFLine=true;bd.limit=dc.getAttribute("limit");if(!bd.limit){bd.limit=3}bd.socialShareLimit=dc.getAttribute("socialShareLimit");if(!bd.socialShareLimit){bd.socialShareLimit=1}}var cW=cZ.getElementsByTagName("security")[0];if(cW!=null&&cW!==""){var dl=cW.getElementsByTagName("ViewerDiagnostics")[0];if(dl!=null&&dl!==""){aE.viewerDiagnostics={};var c1=dl.getElementsByTagName("salt")[0];if(c1!=null&&c1!==""){aE.viewerDiagnostics.salt={};var c3=c1.getAttribute("value");var dj=c1.getAttribute("version");if(c3!=null&&c3!==""){aE.viewerDiagnostics.salt.value=c3;aE.viewerDiagnosticsEnabled=true;if(dj!=null&&dj!==""){aE.viewerDiagnostics.salt.version=dj}aE.viewerDiagnostics.salt.bytes=c1.getAttribute("bytes")*2;if(!aE.viewerDiagnostics.salt.bytes){aE.viewerDiagnostics.salt.bytes=16*2}aE.viewerDiagnostics.salt.iterations=c1.getAttribute("iterations");if(!aE.viewerDiagnostics.salt.iterations){aE.viewerDiagnostics.salt.iterations=50}}else{aE.viewerDiagnosticsEnabled=false}}}}var c6=cZ.getElementsByTagName("bucketInfo")[0];b7.bucketLength=c6.getElementsByTagName("bucketLength")[0].childNodes[0].nodeValue;b7.bucketCount=c6.getElementsByTagName("bucketCount")[0].childNodes[0].nodeValue;cg=true;m();bb();bx();var dk=cZ.getElementsByTagName("match");for(var dg=0;dg<dk.length;dg++){match=dk[dg];try{parentKey=match.parentNode.parentNode.getAttribute("name");if(!bG[parentKey]){bG[parentKey]={}}bG[parentKey][match.getAttribute("key")]={type:match.getAttribute("type"),name:match.getAttribute("name"),value:match.getAttribute("value")}}catch(di){br(di)}}aX();I();aI()}}}catch(di){br("Exception,  readConfig :"+di)}}function m(){try{var cP=bl.split;for(var cQ=0;cQ<cP.length;cQ++){bv[cP[cQ].name]=cP[cQ].key}}catch(cR){}}function aX(){var cS={};try{if(!bG.bitRateBucketTimes){bG.bitRateBucketTimes={};cS=bG.bitRateBucketTimes;cS.U={key:"U",type:"range"};cS.S={key:"S",max:1500,value:"max:1500",type:"range"};cS.Q={key:"Q",min:1500,max:2500,value:"min:1500;max:2500",type:"range"};cS.D={key:"D",min:2500,value:"min:2500",type:"range"}}else{var cU,cR,cQ;for(cQ in bG.bitRateBucketTimes){cS=bG.bitRateBucketTimes[cQ];if(cS){cS.key=cQ;if(!cS.value){cS.category="first"}else{cU=cS.value;cR=cU.split(";");for(var cP=0;cP<cR.length;cP++){if(cR[cP].indexOf("min:")!=-1){cS.min=parseInt(cR[cP].split(":")[1])}else{if(cR[cP].indexOf("max:")!=-1){cS.max=parseInt(cR[cP].split(":")[1])}}}}}}}bU.bitRateBucketMap={};for(var cT in bG.bitRateBucketTimes){bU.bitRateBucketMap[cT]=0}}catch(cV){br("Exception, find bit rate match rules :"+cV)}}function I(){br("fillVideoWithConfig function");if(ax&&ax.akamai){var e=ax.akamai;e.populateMetricsFromConfiguration();if(e.isSLineSent){t(ax)}if(aE.viewerDiagnosticsEnabled){bH(e)}e.cdn=aD(e)}}function aI(){br("sendStoredBeacons: number of beacons to be sent = "+cv.length);try{var cQ=ax.akamai;while(cv.length>0){var cP=cv.shift();br("readConfig: sending beacon event code = "+cP.code);cP.element.populateMetricsFromConfiguration();cP.element.xViewerId=bX.xViewerId;cP.element.xViewerIdVersion=bX.xViewerIdVersion;cP.element.cdn=aD(cP.element);bF(cP.element,cP.code,cP.synch)}}catch(cR){br("Exception,  sendStoredBeacons"+cR)}}cz(al,au.url,false);function aD(cR){if(a1.cdn){return a1.cdn}else{try{for(key in bG.cdn){var cU=bG.cdn[key];if(cU&&cU.name&&cU.value){var cT=cR[cU.name];var cP=cU.value.split(",");for(var cQ=0;cQ<cP.length;cQ++){if(cT&&(cT.indexOf(cP[cQ].trim())!=-1)){return key;break}}}}}catch(cS){br("Exception Get CDN"+cS.message)}}}function aq(cQ){var cP="";var e;if(cQ.indexOf("://")!=-1){e=cQ.indexOf("://");cQ=cQ.substring(e+3)}if(cQ.indexOf("/")!=-1){e=cQ.indexOf("/");if(cQ.indexOf("?")!=-1){var cR=cQ.indexOf("?");e=(e<cR)?e:cR}cP=cQ.substring(0,e)}else{if(cQ.indexOf("?")!=-1){var e=cQ.indexOf("?");cP=cQ.substring(0,e)}else{cP=cQ}}return cP}function ao(cT,cS,e,cR){var cQ=cT.currentState;var cP=cT.seekObject;if(cR=="S"&&cP.seekStartStreamTime==-1){cP.seekStartEpochTime=cS;cP.seekEndEpochTime=cS;cP.seekStartStreamTime=cQ.timeUpdateStreamTime;cP.seekEndStreamTime=e}else{if(cR=="S"&&cP.seekEndStreamTime==cQ.timeUpdateStreamTime){cP.seekEndEpochTime=cS;cP.seekEndStreamTime=e}else{if(cP.seekStartStreamTime!=-1){cT.seekTime+=cP.seekEndEpochTime-cP.seekStartEpochTime;if(cT.seekIntervalsAsString!="-"){cT.seekIntervalsAsString+=","+cP.seekStartStreamTime+":"+cP.seekEndStreamTime}else{cT.seekIntervalsAsString=cP.seekStartStreamTime+":"+cP.seekEndStreamTime}if(cT.pauseSeekSession!="-"){cT.pauseSeekSession+=",S("+cP.seekStartStreamTime+":"+(cP.seekStartEpochTime-cT.startTimer)+"-"+cP.seekEndStreamTime+":"+(cP.seekEndEpochTime-cT.startTimer)+")"}else{cT.pauseSeekSession="S("+cP.seekStartStreamTime+":"+(cP.seekStartEpochTime-cT.startTimer)+"-"+cP.seekEndStreamTime+":"+(cP.seekEndEpochTime-cT.startTimer)+")"}++cT.seekCount;cT.seekObject={seekStartEpochTime:-1,seekEndEpochTime:-1,seekStartStreamTime:-1,seekEndStreamTime:-1}}}}}function O(cQ,cP){br("set RebufferSession : curTime = "+cP);try{var cS=Math.round(cP-cQ.lastLogTime-cQ.curRebufferTime);var cT=Math.round(cQ.curRebufferTime);cQ.currRebufferEndEpoch=Math.round(cP);cQ.currRebufferStartEpoch=Math.round(cP-cT);if(cT>l.isSessionWithRebufferLimit){cQ.isSessionWithRebuffer=1}if(cQ.rebufferSession){cQ.rebufferSession=cQ.rebufferSession+";"+cS+":"+cT}else{cQ.rebufferSession=cS+":"+cT}}catch(cR){br("Error, set RebufferSession"+cR.message)}}function ch(cV,cP){var cS;var cU;if(cP=="B"){var cQ="";if(cV.rebufferSession){var e=cV.rebufferSession.split(";");for(var cR=0;cR<e.length;cR++){var cT=e[cR].split(":");if(cR==0){cQ+="0:"+cT[1]}else{cQ+=e[cR]}if(cR!=e.length-1){cQ+=";"}}br("newRebufferSession = "+cQ);cV.rebufferSession=cQ}cU=1;cS=0}else{cU=0;if(cV.lastRebufferEndEpoch>0){cS=cV.firstRebufferStartEpoch-cV.lastRebufferEndEpoch}else{cS=-1}}cV.rebufferSession=cU+":"+cS+";"+cV.rebufferSession;cV.lastRebufferEndEpoch=cV.currRebufferEndEpoch}function b4(cS,cR){var cP=1;cS.rebufferSessionH=null;if(!cS.rebufferSessionArrayHLine||((cS.rebufferSessionArrayHLine)&&(cS.rebufferSessionArrayHLine.length===0))){return}while(cS.rebufferSessionArrayHLine[cP]&&((cR-cS.rebufferSessionArrayHLine[cP])>(2*l.heartBeatInterval))){cS.rebufferSessionArrayHLine.shift();cS.rebufferSessionArrayHLine.shift();if(cS.isSessionWithRebufferH==1){cS.sendIsSessionWithRebufferH=0;cS.isSessionWithRebufferH=null}}while(cS.rebufferSessionArrayHLine[cP]){var e=cR-cS.rebufferSessionArrayHLine[cP-1];var cQ=cS.rebufferSessionArrayHLine[cP]-cS.rebufferSessionArrayHLine[cP-1];if(cS.sendIsSessionWithRebufferH==1){if(cQ>l.isSessionWithRebufferLimit){cS.isSessionWithRebufferH=1}}if(cS.rebufferSessionH){cS.rebufferSessionH=cS.rebufferSessionH+";"+e+":"+cQ}else{cS.rebufferSessionH=e+":"+cQ}cP=cP+2}cP=cP-1;if(cS.rebufferSessionArrayHLine[cP]){var e=cR-cS.rebufferSessionArrayHLine[cP];if(cS.sendIsSessionWithRebufferH==1){if(e>l.isSessionWithRebufferLimit){cS.isSessionWithRebufferH=1}}if(cS.rebufferSessionH){cS.rebufferSessionH=cS.rebufferSessionH+";"+e+":"+e}else{cS.rebufferSessionH=e+":"+e}}}function cf(e){if(a1.deliveryType){return a1.deliveryType}else{return e.deliveryType}}function bR(cQ){var e=cQ.readyState;var cP=cQ.status;if(parseInt(cP/100)===4||cP===0){br("readServerIp: serverIpFailed request falied as status is ,in 400 series");X=true}if(e==4&&cP==200){var cS=cQ.responseXML;if(cS){var cR;if(cS.documentElement){cR=cS.documentElement}else{cR=cS}cd.serverip=cR.getElementsByTagName("serverip")[0].childNodes[0].nodeValue;br("readServerIp : diagnostics.serverip =  "+cd.serverip)}}}function ac(e){var cR=e.akamai;if(X){br("getting ServerIp : serverIp request failed");return}if(cR.hostName){try{var cQ=cR.protocol+"://"+cR.hostName+"/serverIp";br("getting ServerIp : serverIpPath = "+cQ);cz(bR,cQ,false)}catch(cP){X=true;br("getting ServerIp: error, xmphttprequest")}}}function ab(cQ){var cP="";var cS=cQ.readyState;var cR=cQ.status;if(parseInt(cR/100)===4||cR===0){br("read fast tcp: fast tcp Failed request falied as status is 400 series");c.fastTCPFailed=true}try{if(cS==4&&cR==200){var cW=cQ.responseXML;if(cW){br("populating fast tcp");var cX;if(cW.documentElement){cX=cW.documentElement}else{cX=cW}if(cX&&cX.firstElementChild){var e=cX.firstElementChild;var cT="";var cV="";if(e){if(e.hasAttribute("key")){cV=e.getAttribute("key");cT=e.childNodes[0].nodeValue;cP=cV+":"+cT}while(e.nextElementSibling){e=e.nextElementSibling;if(e.hasAttribute("key")){cV=e.getAttribute("key");cT=e.childNodes[0].nodeValue;if(cP){cP+=","+cV+":"+cT}else{cP=cV+":"+cT}}}}}}}if(cP){c.ftcp=cP}}catch(cU){br("Exception,  read fast tcp"+cU)}}function b6(e){var cR=e.akamai;if(c.fastTCPFailed){br("getting fast tcp: request failed");return}if(cR.hostName){try{var cQ=cR.protocol+"://"+cR.hostName+"/protocol-info";br("getting fast tcp : fastTCPPath = "+cQ);cz(ab,cQ,false)}catch(cP){c.fastTCPFailed=true;br("getting ServerIp: error, xmphttprequest")}}}function aH(cP,cS){try{var cQ=cP.akamai;if(l&&l.logInterval&&!cS){cQ.fastTCPServerIpTimer=bB(aH,l.logInterval,[cP])}if(!X){ac(cP)}if(!c.fastTCPFailed&&c.fastTCPEnabled){b6(cP)}if(X&&c.fastTCPFailed){bE(cQ.fastTCPServerIpTimer)}}catch(cR){br("Exception get fast tcp server ip")}}function a4(e){var cP=null;if(e.objectBased){if(e.errorReason){cP=e.errorReason}else{cP=bW[0]}}else{if(e.error&&e.error.code){cP=bW[e.error.code]}else{cP=bW[0]}}return cP}function aa(cP){var e="Play.End.Detected";if(cP.objectBased){if(cP.endReason){e=cP.endReason}}return e}function v(){bX.viewerId=a1.viewerId?a1.viewerId:null;bX.viewerDiagnosticsId=a1.viewerDiagnosticsId?a1.viewerDiagnosticsId:(a1.viewerId?a1.viewerId:null)}function d(cP){var e=cN();return e}function az(cQ){var cS=bX.viewerId;if(cS=="-"){return}if(!cS){try{if(window&&window.localStorage&&window.localStorage.getItem("akamai_clientId")){cS=window.localStorage.getItem("akamai_clientId")}else{if(y("HTML_ViewerId")){cS=y("HTML_ViewerId")}else{try{cS=cN();if(window&&window.localStorage){window.localStorage.setItem("akamai_clientId",cS)}try{a8("HTML_ViewerId",cS)}catch(cR){}}catch(cP){br("window.localStorage Exception :"+cP)}}}}catch(cR){br("Exception,  getting viewerId"+cR);cS=cN()}}return cS}function bH(cU,cR){var cT=null;if(bX&&bX.viewerDiagnosticsId){cT=bX.viewerDiagnosticsId}var cP="";var cS=50;var e=16*2;if(!cT||cT=="-"){return}if(cR&&cU.xViewerId){return}aR(cU);br("get Viewer DiagnosticsID");cT=encodeURIComponent(cT);if(aE&&aE.viewerDiagnostics&&aE.viewerDiagnostics.salt&&aE.viewerDiagnostics.salt.value){cP=aE.viewerDiagnostics.salt.value}if(aE&&aE.viewerDiagnostics&&aE.viewerDiagnostics.salt&&aE.viewerDiagnostics.salt.iterations){cS=aE.viewerDiagnostics.salt.iterations}if(aE&&aE.viewerDiagnostics&&aE.viewerDiagnostics.salt&&aE.viewerDiagnostics.salt.bytes){e=aE.viewerDiagnostics.salt.bytes}var cQ=bk.PBKDF2(cT,cP,{keySize:e/8,iterations:cS});cU.xViewerId=cQ;bX.xViewerId=cQ}function aR(cP){var e=null;if(aE&&aE.viewerDiagnostics&&aE.viewerDiagnostics.salt&&aE.viewerDiagnostics.salt.version){e=aE.viewerDiagnostics.salt.version}cP.xViewerIdVersion=e;bX.xViewerIdVersion=e}function cx(cQ,cR,cP){var e;if(cR=="viewerId"||cR=="clientId"||cR=="viewerDiagnosticsId"){return}if(cP){if(a1[cP]){e=a1[cP]}else{if(cQ[cP]){e=cQ[cP]}}}cQ[cR]=e}this.getValueFromQueryString=function(){return E(key,searchURL)};function E(cQ,cU,cS){if(cS==null){cS=""}try{if(cU==""||cU==null){return}cQ=cQ.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var cR=new RegExp("[\\?&]"+cQ+"=([^&#]*)");var cP=cR.exec(cU);if(cP==null){return cS}else{return cP[1]}}catch(cT){br("Exception,  getValueFromQueryString :"+cT);return cS}}function by(e){var cP=e.akamai;bE(cP.fastTCPServerIpTimer);aH(e)}function bB(cR,cT,cQ){try{var cP=null;cP=setTimeout(function(){cR.apply(undefined,cQ)},cT);return cP}catch(cS){br("Exception, set window timeout:"+cS);try{cP=window.setTimeout(function(){cR.apply(undefined,cQ)},cT)}catch(cS){return null}return cP}}function bE(cP){try{clearTimeout(cP)}catch(cQ){br("Exception clear window timeout:"+cQ);try{window.clearTimeout(cP)}catch(cQ){}}}function t(e){br("startBeaconTImer");var cP=e.akamai;if(cP.areTimerStarted){return}br("startBeaconTimer: starting beacon timer");cP.firstPLineTimer=bB(cI,l.secondaryLogTime,[e]);cP.hLineTimer=bB(cD,l.heartBeatInterval,[e]);cP.fastTCPServerIpTimer=bB(by,(l.logInterval-5000),[e]);if(e.objectBased){F=500}cP.pollingTimer=bB(cn,F,[e]);cP.areTimerStarted=true}function bm(e){var cP=e.akamai;if(cP){if(cP.hLineTimer){bE(cP.hLineTimer)}if(cP.pollingTimer){bE(cP.pollingTimer)}if(cP.fastTCPServerIpTimer){bE(cP.fastTCPServerIpTimer)}if(cP.firstPLineTimer){bE(cP.firstPLineTimer)}if(bM&&bM.retryTimer){bE(bM.retryTimer)}}}function cG(cP){var cS=cP.akamai;bd.akamai={};bd.dataSent={};cS.areTimerStarted=false;cS.isCLineSent=false;cS.isELineSent=false;cS.lastRebufferEndEpoch=0;cS.connectTime=0;a6.browserClose=false;cS.totalPlayClockTime=cS.totalStreamTime=cS.totalRebufferCount=cS.totalRebufferTime=0;cS.isVisitEnd=0;cS.sequenceId="0";ay(cP);cS.attemptId=cS.sessionId=d(cS);v();cS.clientId=cS.viewerId=az(cS);if(aE.viewerDiagnosticsEnabled){bH(cS)}else{}cS.lastPLineSentTime=cS.hLineSentCount=cS.lastSLineSentTime=cS.lastHLineSentTime=0;cS.lastHTime=0;Q("HTML_LastCLineTime");bs=[0,0,0,0,0,0,0,0,0,0,0,0];var cT=parseInt(y("HTML_VisitCountCookie"));if(!cT||cT==""){cS.isVisitStart=1;cT=0;a8("HTML_VisitCountCookie",cT)}var cU=parseInt(y("HTML_isPlayingCount"));if(!cU||cU==""){cU=0;a8("HTML_isPlayingCount",cU)}var e=y("HTML_VisitValueCookie");if(!e||e==""){a8("HTML_VisitValueCookie","0|0|0|0|0|0|0|0|0|0|0|0|0")}var cR=y("HTML_BitRateBucketCsv");if(!cR||cR==""){a8("HTML_BitRateBucketCsv","0,0,0,0,0,0,0,0")}var cQ=y(b0);if(!cQ||cQ==""){cS.browserSessionId=cS.visitId=cN();a8(b0,cS.visitId)}else{cS.browserSessionId=cS.visitId=y(b0)}}function A(e){var cQ=e.akamai;cQ.isILineSent=true;++cQ.iLineCount;cQ.lastSLineSentTime=bI();if(cQ.iLineCount==1){var cR=parseInt(y("HTML_VisitCountCookie"));++cR;a8("HTML_VisitCountCookie",cR);f=bI()}var cP=parseInt(y("HTML_VisitIntervalStartTime"));if(!cP||cP==" "){cP=bI();a8("HTML_VisitIntervalStartTime",cP)}bs[0]=1;cQ.sendVLine=true}function aj(cT){try{var cS=ax.akamai;if(cS.clearVisitTimeoutId){bE(cS.clearVisitTimeoutId)}cG(ax);var cR=bI();cS.logInterval="0";if(!cg){var cQ=cs(cS);var cP={element:cQ,code:"init",synch:cT};cv.push(cP)}else{bF(cS,"init",cT)}cS.lastLogTime=cR;++cS.sequenceId;A(ax);cS.currentState.state=ce.init;br(bI()+": sendBeaconILineAd : Setting state to init");cS.currentState.timeUpdateClockTime=cR;cS.startTimer=cR}catch(cU){br("Exception, send I line AD:"+cU)}}function cI(e){var cP=e.akamai;cP.lastPLineSentTime=bI();q(e,"playing",false)}function r(cV,cX,cS,cR){try{br("start of the session function");var cT=cV.akamai;if(!cT||!cT.firstTimePlay){return}var cS=bI();if(cT.adLoadTime&&cT.adLoadTime>cT.iLineSentTime){cT.startupTime=cT.adLoadTime-cT.iLineSentTime;if(cT.adEndTime){cT.startupTime+=cS-cT.adEndTime}}else{cT.startupTime=cS-cT.iLineSentTime}if(cT.startupTime>l.startupTimeOutlierLimit){cT.outlierStartupTime=cT.startupTime;cT.startupTime=0}cT.bufferingTime=cT.startupTime;var cW={type:"startup",startTime:0,endTime:cT.startupTime};ay(cV);var cQ=w(cV);bP(cQ,cT);cT.streamUrl=cQ;if(cQ!=null&&cQ.indexOf("?")!=-1){cQ=cQ.substring(0,cQ.indexOf("?"))}if(cQ!=null&&cQ!=""){if(/.m3u8$/.exec(cQ)){cT.format="L";cT.playerFormat=cT.playerType+":"+cT.format}else{cT.format="P";cT.playerFormat=cT.playerType+":"+cT.format;cT.deliveryType="O"}}cT.streamLength=parseInt(B(cV));cT.played=[];var cP=parseInt(y("HTML_isPlayingCount"));cP=cP+1;a8("HTML_isPlayingCount",cP);v();if(aE.viewerDiagnosticsEnabled){bH(cT,true)}cT.lastSLineSentTime=bI();q(cV,"playStart",false);cT.rebufferSessionArrayHLine=[];cT.isSLineSent=true;if(cg){t(cV)}bs[1]=1;cT.isFirstTitle=null;cT.isVisitStart=null;cT.firstTimePlay=false;cT.initPlayed(cR)}catch(cU){br("Exception, send S line:"+cU)}}function cB(cP,cS){try{br("send beacon I line");var cR=cP.akamai;var cQ=bI();cR.cdn=aD(cR);aH(cP,true);if(!cR.iLineSentTime){cR.iLineSentTime=cQ}if(cP.videoWidth&&cP.videoHeight){cR.videoSize=cP.videoWidth+"x"+cP.videoHeight}if(!cR.isILineSent){cG(cP);q(cP,"init",cS);A(cP);if(cR.clearVisitTimeoutId){bE(cR.clearVisitTimeoutId)}}}catch(cT){br("Exception send I line:"+cT)}}function cD(e){var cP=e.akamai;cP.hLineTimer=bB(cD,l.heartBeatInterval,[e]);q(e,"heartBeat",false);cP.lastHLineSentTime=bI();cP.hLineSentCount++;if((cP.hLineSentCount%(l.logInterval/l.heartBeatInterval))==0){q(e,"playing",false);cP.lastPLineSentTime=bI()}}function bq(cP,cS,cR){try{br("sendBeaconCLine : endReasonCode = "+cS);var cQ=cP.akamai;cQ.endReasonCode=cS;q(cP,"complete",cR);var cV=parseInt(y("HTML_isPlayingCount"));cV=cV-1;a8("HTML_isPlayingCount",cV);cQ.isVisitStart=null;cQ.isCLineSent=true;cQ.firstTimePlay=true;bm(cP);var cU=bI();a8("HTML_LastCLineTime",cU)}catch(cT){br("Exception, send beacon C Line:"+cT)}}function g(cP,cU,cR){try{var cQ=cP.akamai;if(cU){cQ.errorCode=cU}else{cQ.errorCode="UNKNOWN"}br("sendBeaconELine : errorCode = "+cQ.errorCode);bs[3]=1;if(cQ.sequenceId==1){bs[11]=1;v();if(aE.viewerDiagnosticsEnabled){bH(cQ,true)}}cQ.playerState="E";q(cP,"error",cR);if(cQ.isSLineSent){var cV=parseInt(y("HTML_isPlayingCount"));cV=cV-1;a8("HTML_isPlayingCount",cV)}cQ.isELineSent=true;cQ.isVisitStart=null;cQ.firstTimePlay=true;bm(cP);var cT=bI();b2(cQ);a8("HTML_LastCLineTime",cT)}catch(cS){br("Exception, send beacon E line:"+cS)}}function ag(cP){try{br("sendBeaconVLine");var cT=cP.akamai;cT.isVisitEnd=1;n(cT);var cQ=parseInt(y("HTML_VisitIntervalStartTime"));var cS=bI();cT.visitMaxPersistentBitRateBucket=bV();cT.visitInterval=cS-cQ;if(cQ==""||cQ==null||isNaN(cQ)){cT.visitInterval=cS-f}cT.sessionId=null;cT.attemptId=null;cT.sequenceId=null;Q("HTML_BitRateBucketCsv");Q("HTML_VisitValueCookie");Q("HTML_VisitIntervalStartTime");Q("HTML_LastCLineTime");Q("HTML_VisitCountCookie");Q("HTML_isPlayingCount");Q(b0);q(cP,"visit",true);bd.akamai={};bd.dataSent={};br("sendBeaconVLine: beacon sent");cT.sendVLine=false;cT.iLineCount=0;bE(cP.akamai.clearVisitTimeoutId);var cR=cT.isPlaylist;cP.akamai=new aU(ax);if(typeof(akamaiBCVideoObject)!="undefined"){cP.akamai.isPlaylist=cR}}catch(cU){br("Exception, send beacon V line:"+cU)}}function W(){var e=y("HTML_VisitValueCookie");var cS=e.split("|");var cT;for(var cQ=0;cQ<bs.length;cQ++){z[cQ]+=bs[cQ]}br("setVisitValueCookie :: visit values saved"+z);for(var cR=0;cR<cS.length;cR++){cS[cR]=parseInt(cS[cR])+bs[cR]}var cP=cS.join("|");a8("HTML_VisitValueCookie",cP)}function a0(){try{var cS=y("HTML_BitRateBucketCsv");var cT=ar.split(",");var cP=cS.split(",");var cQ=0;for(var cR in bU.bitRatePlayTime){cR=parseInt(cR);cQ=parseInt((cR-1)/500000);if(cQ>7){cQ=7}cP[cQ]=parseInt(cP[cQ])+bU.bitRatePlayTime[cR];cT[cQ]=parseInt(cT[cQ])+bU.bitRatePlayTime[cR]}cS=cP.join(",");a8("HTML_BitRateBucketCsv",cS);ar=cT.join(",")}catch(cU){br("Exception set bit rate bucketcsv"+cU)}}function b1(e){br("entered setVisitValueParameters");bs[4]=e.totalPlayClockTime;bs[5]=e.totalPlayStreamTime;bs[6]=e.totalRebufferCount;bs[7]=e.totalRebufferTime;bs[8]=e.totalAdPlayClockTime;bs[9]=e.totalAdStartCount;bs[10]=e.totalAdAbandonCount;if(e.totalPlayClockTime>5000){bs[2]=1}a0();W()}function n(cR){try{var cW=y("HTML_VisitValueCookie");var cP=cW.split("|");var cT=true;if(cP==""||cP==null){cT=false}var cX;var cV=[];if(cT){cV=cP}else{cV=z}var cU=["visitAttempts","visitPlays","visitViews","visitErrors","visitPlayClockTime","visitPlayStreamTime","visitRebufferCount","visitRebufferTime","visitAdPlayClockTime","visitAdStartCount","visitAdAbandonCount","visitStartupErrors"];for(var cQ=0;cQ<cU.length;cQ++){cR[cU[cQ]]=cV[cQ]}}catch(cS){br("Exception get visit value  cookie : "+cS)}}function bV(){try{var cT=y("HTML_BitRateBucketCsv");var cQ=cT.split(",");var cP=false;if(cQ==null||cQ==""){cQ=ar.split(",")}cQ[0]=parseInt(cQ[0]);var cV="00",cR=cQ[0];for(var cS=0;cS<cQ.length;cS++){cQ[cS]=parseInt(cQ[cS]);if(cQ[cS]>0){cP=true}if(cR<cQ[cS]){cR=cQ[cS];cV="0"+cS}}if(cP){return cV}}catch(cU){br("Exception, get visit max bit rate bucket"+cU)}}function a9(cR){try{var cP=encodeURI(cR);cP=cP.replace(/#/g,"%23");return cP}catch(cQ){br("Exception,  encoding beacon");return cR}}function a2(){try{br("send delayed beacon");if(a6.queue&&a6.queue.length>0){var cP=a6.queue.shift();a6.timer=bB(a2,a6.time,null);br("sending delayed beacon ::"+cP.url,"BEACON");cz(null,cP.url,cP.isSync)}else{br("send delayed beacon : clear the timer");bE(a6.timer);a6.timer=null}}catch(cQ){}}function at(cT,cS,cR){if(bN==0){br("put beacon On Wire, dont send beacon isACtive is zero");return}var e=l.beaconUrl+"?"+cT;try{if(a6.enabled){var cQ={};if(a6.browserClose){if(a6.timer){bE(a6.timer)}if(a6.queue&&a6.queue.length>0){while(a6.queue.length>0){cQ=a6.queue.shift();br("put beacon on wire, send beacon from queue::"+cQ.url,"BEACON");cz(null,cQ.url,cQ.isSync)}}br("put beacon on wire browser close::"+e,"BEACON");cz(null,e,cS)}else{br("put beacon on wire pushing beacon in queue::"+e);cQ.url=e;cQ.isSync=cS;a6.queue.push(cQ);if(a6.timer){br("put beacon on wire: timer is running")}else{br("put beacon on wire: call send delayed beacon");a2()}}}else{br("put beacon on wire"+e,"BEACON");cz(null,e,cS)}}catch(cP){br("failed to send beacon");br(cP)}}function cr(cP,cQ){try{cP=cP.substring(0,cQ);return cP}catch(cR){br("Exception,  getTruncatedMetric"+cR);return cP}}function cJ(cV,cT,cP,cU){try{var cR;for(var cS=0;cS<cT.length;cS++){cR=cT[cS].name;var cQ=null;if(cR in cV){cQ=cV[cR]}if(cT[cS].value){cQ=cT[cS].value}if(cQ||cQ==0){if(cT[cS].sendOnce){if(cT[cS].isSent===false){if(cQ!=0){cT[cS].isSent=true}h(cQ,cT,cR,cS,cU,cP)}}else{h(cQ,cT,cR,cS,cU,cP)}}}}catch(cW){br("Exception, assemble logs:"+cW)}}function h(cV,cW,cQ,cS,cP,cT){try{if(cW[cS].regExp){var cX=new RegExp(cW[cS].regExp);var cR=cX.exec(cV);if(cR){cV=cR[1]}}}catch(cU){br("Exception,  evaluating regExp attribute for metric : "+cQ)}cV=String(cV).replace(/~/g,l.encodedParamSeparator);if(cW[cS].size){cV=cr(cV,cW[cS].size)}if(cW[cS].key in cP){}else{cP[cW[cS].key]=cW[cS].key;cT.push((l.useKey?cW[cS].key:cQ)+"="+cV)}}function bF(cZ,cV,cU){try{br("getBeaconStrings : eventCode =  "+cV);var cS=bl.common;var da=[];var cY=bl[cV];if(cY==null||cY=="undefined"){br("getbeaconstrings, return as eventmetrics undefined");return}var c3=[];var c9={};if(!cZ.eventCode){cZ.eventCode=ad[cV]}cJ(cZ,cS,da,c9);if(cV=="error"){cZ.updateTerminateMetrics();b1(cZ,bs)}if(cV=="complete"){cZ.updateTerminateMetrics();var cP=bl.playing;b1(cZ,bs);cJ(cZ,cP,c3,c9)}cJ(cZ,cY,c3,c9);var c2=da.join(l.urlParamSeparator);c2=a9(c2);var c7=0;try{for(var c5 in bv){if(l.useKey){c7+=bv[c5].length+3+l.urlParamSeparator.length}else{c7+=c5.length+3+l.urlParamSeparator.length}}}catch(c8){c7=12}c7--;var cX=l.maxLogLineLength-c7-c2.length-3-l.beaconUrl.length;if(cX<=0){cX=4780-c7-c2.length-3-l.beaconUrl.length}var c4=[];var c1="";if(cX>0){if(c3.length>0){var c6;var cQ="";var cT="";for(c6=0;c6<c3.length;c6++){cT=a9(c3[c6]);if(cT.length>=cX){c4.push(cT)}else{if(cQ.length+cT.length<=cX){if(cQ){cQ+=l.urlParamSeparator+cT}else{cQ=cT}}else{c4.push(cQ);cQ=""}}}if(cQ!=""){c4.push(cQ)}}var cR=c4.length;if(cR>1){for(var c0=1;c0<=cR;++c0){c1=c2+l.urlParamSeparator;c1+=((l.useKey?bv.partNumber:"partNumber")+"="+c0)+l.urlParamSeparator;c1+=((l.useKey?bv.totalParts:"totalParts")+"="+cR)+l.urlParamSeparator;c1+=c4[c0-1];if(bl[cV]){at(c1,cU,cZ)}}}else{c1=c2+l.urlParamSeparator+c4[0];at(c1,cU,cZ)}}else{var cW=c3.join(l.urlParamSeparator);cW=a9(cW);c1=c2+l.urlParamSeparator+cW;if(bl[cV]){at(c1,cU,cZ)}}}catch(c8){br("Exception, get beacon Strings:"+c8)}}function b2(e){bd.fLineCount=0;var cP=cs(e);bd.akamai=cP;bd.akamai.customDataPopulated=false}function s(){try{var cT="socialShare:";var cP=cT.length;var cQ=bd.socialSharingObj;for(var cR in a1){if(cR.indexOf(cT)!=-1){if(cR in bd.dataSent){if(bd.dataSent[cR].count<bd.socialShareLimit){++bd.dataSent[cR].count;if(cQ==null){cQ[cR.substring(cP)]=a1[cR]}else{if(cR.substring(cP) in cQ){cQ[cR.substring(cP)]=parseInt(cQ[cR.substring(cP)])+parseInt(a1[cR])}else{cQ[cR.substring(cP)]=a1[cR]}}}}else{bd.dataSent[cR]={};bd.dataSent[cR].value=a1[cR];bd.dataSent[cR].count=1;cQ[cR.substring(cP)]=a1[cR]}delete a1[cR]}}bd.socialSharingObj=cQ}catch(cS){br("Exception,  getFeedbackObj"+cS);bd.socialSharing=null}}function cK(cQ){try{var cS=null;if(bd.socialSharingObj!=null){for(var cP in bd.socialSharingObj){if(cS==null){cS=cP+":"+bd.socialSharingObj[cP]+","}else{cS+=cP+":"+bd.socialSharingObj[cP]+","}}}if(cS!=null){cQ.socialSharing=cS.substring(0,cS.length-1)}}catch(cR){br("Exception,  getFeedbackData"+cR);cQ.socialSharing=null}bd.socialSharingObj={}}function bu(cR){try{for(var cQ in bl){if(bl[cQ]){for(var cP=0;cP<bl[cQ].length;cP++){if(bl[cQ][cP].fallback&&!a1[bl[cQ][cP].name]){cx(cR,bl[cQ][cP].name,bl[cQ][cP].fallback)}}}}}catch(cS){}}function aT(cQ){try{var cP=R.streamName?R.streamName:cQ.streamName}catch(cR){}try{if(a1.title){cQ.title=a1.title}else{cQ.title=a1.eventName?a1.eventName:cP}if(a1.eventName){cQ.eventName=a1.eventName}else{cQ.eventName=a1.title?a1.title:cP}}catch(cR){br("Exception,  getting title and eventName, "+cR)}}function aY(cU,cX,cR,cP){br("updating metrics for playing and end events");var cT=cU.akamai;var cV=0;var cW=cT.playerState;var cQ=true;cT.currentStreamTime=parseInt(av(cU));switch(cT.currentState.state){case ce.playing:cT.playerState="PL";if(cX-cT.seekTime>0){cT.updatePlayClockTime(cX-cT.seekTime,cT.currentState.lastEventClockTime,cR)}if(cT.playClockTime<0){cT.playClockTime=0}cT.updatePlayed(cT.currentStreamTime);break;case ce.pause:cT.pauseDuration+=cX;cT.playerState="PS";break;case ce.rebuffering:cT.rebufferTime+=cX;cT.curRebufferTime+=cX;O(cT,cR);cT.playerState="B";cV=cR-cT.curRebufferTime;break;case ce.resumeBuffering:cT.playerState="RB";cT.resumeBufferTime+=cX;break;case ce.ended:cT.updatePlayed(cT.currentStreamTime);break;case ce.seek:if((cR-cT.currentState.timeUpdateClockTime)>0){ao(cT,cR,cT.currentStreamTime,"S")}cT.currentState.timeUpdateClockTime=cR;cT.playerState="SK";break;default:cQ=false;break}bU.getTransitionSession(cT);ao(cT);if(cT.rebufferSession){ch(cT,cW);cT.firstRebufferStartEpoch=cV}if(cT.playClockTime>5000){cT.isView=1}if(cQ){cT.currentState.lastEventClockTime=cR}cT.bytesLoaded=bS(cU);if(cT.played){var e=cT.played;cT.playStreamTime=0;for(var cS=0;cS<e.length;cS++){cT.playStreamTime+=parseInt(e[cS][1]-e[cS][0])}if(cT.logType=="R"){cT.playStreamTime-=cT.lastPlayStreamTime;cT.lastPlayStreamTime+=cT.playStreamTime}}if(cP&&cT.endReasonCode!="Browser.Close"&&!cT.streamTitleSwitchReason){cT.playerState="E"}}function cF(cR){try{var cP="-";if(document&&document.referrer){var cQ=document.referrer;cQ=cQ.split("/",3);if(cQ&&cQ[2]){cP=cQ[2]}}if(window==window.top){cR.pageUrl=a1.pageUrl?a1.pageUrl:document.URL;cR.pageHost=(a1.pageUrl&&aq(a1.pageUrl))?aq(a1.pageUrl):document.location.hostname;cR.pageReferrer=a1.pageReferrer?a1.pageReferrer:(document.referrer?document.referrer:"-");cR.pageReferrerHost=(a1.pageReferrer&&aq(a1.pageReferrer))?aq(a1.pageReferrer):(document.referrer?cP:"-")}else{cR.pageUrl=a1.pageUrl?a1.pageUrl:(document.referrer?document.referrer:"-");cR.pageHost=(a1.pageUrl&&aq(a1.pageUrl))?aq(a1.pageUrl):(document.referrer?cP:"-");cR.pageReferrer=a1.pageReferrer?a1.pageReferrer:"NA";cR.pageReferrerHost=(a1.pageReferrer&&aq(a1.pageReferrer))?aq(a1.pageReferrer):"NA"}}catch(cS){}}function cj(cS,cR){br("populate custom data, eventCode = "+cR);try{cF(cS);cS.deliveryType=cf(cS);cS.device=a1.device?a1.device:aO;if(cR=="playing"||cR=="complete"||cR=="feedback"||cR=="error"){cK(cS);if((cS.socialSharing==null||cS.socialSharing=="")&&cR=="feedback"&&(!cS.customDataChanged)){--bd.fLineCount;return}}var cQ;for(cQ in a1){if((cQ!="viewerId")&&(cQ!="clientId")&&(cQ!="viewerDiagnosticsId")){if(!(cQ in bZ)){cS[cQ]=a1[cQ]}}}if(bM&&bM.akamai){for(var cP in bM.akamai){cS[cP]=bM.akamai[cP]}}aT(cS);cS.cdn=aD(cS);for(cQ in R){if((cQ!="viewerId")&&(cQ!="clientId")&&(cQ!="viewerDiagnosticsId")&&(cQ!="pluginVersion")){cS[cQ]=R[cQ]}}if("pluginVersion" in R){cS.pluginVersion=bA+":"+R.pluginVersion}}catch(cT){br("Exception,  populate Custom Data , "+cT)}}function q(cW,cT,cV){try{br("sendBeacon: eventCode = "+cT);var cS=cW.akamai;var cR=bI();var cZ=cR-cS.currentState.lastEventClockTime;if(cT!="init"){cS.logInterval=(cS.lastLogTime<=0)?"0":(cR-cS.lastLogTime)/1000}else{cS.logInterval="0"}if(!cS.customDataPopulated){cj(cS,cT)}cS.serverIp=(cd.serverip)?cd.serverip:"-";cS.fastTCP=(c.ftcp)?c.ftcp:"-";cS.eventCode=ad[cT];if(cS.hLineSentCount>0){cS.lastHTime=(cR-cS.lastHLineSentTime)/1000}else{cS.lastHTime=(cR-cS.lastSLineSentTime)/1000}if(cT=="heartBeat"){var cY=cS.logInterval;cS.logInterval=(cR-cS.lastPLineSentTime)/1000;b4(cS,cR)}if(cS.logInterval<0){cS.logInterval="0"}var cQ=false;if(cT=="complete"){cT="playing";cQ=true}cS.endOfStream=cW.ended?"1":"0";cS.currentClockTime=cR-cS.startTimer;cS.currentStreamTime=parseInt(av(cW));if(cT=="playStart"){}if(cT=="error"){}if(cT=="playing"&&!cS.playEndMetricsUpdated){if(cQ){b4(cS,cR)}br("send Beacon, updating play and end metrics");aY(cW,cZ,cR,cQ);ay(cW)}if(!cS.customDataPopulated){bu(cS)}if(!cg){var cX=cs(cS);var cP={element:cX,code:(cQ)?"complete":cT,synch:cV};cv.push(cP);if(cT!="heartBeat"){br("send beacon :configurationPopulated false sequenceId = "+cS.sequenceId);++cS.sequenceId;cS.lastLogTime=cR}else{cS.logInterval=cY}return}if(cT=="playStart"){aQ()}cS.populateMetricsFromConfiguration();cS.xViewerId=bX.xViewerId;cS.xViewerIdVersion=bX.xViewerIdVersion;if(cQ){bF(cS,"complete",cV)}else{bF(cS,cT,cV)}cS.qualityOfExperience=null;cQ=false;if(cT=="playing"||cT=="playStart"){cS.clearRelativeMetrics()}if(cT!="heartBeat"){++cS.sequenceId;cS.lastLogTime=cR}else{cS.logInterval=cY}}catch(cU){br("Exception, send beacon:"+cU)}}function cs(cQ,cS){var cS=cS||{};try{for(var cP in cQ){if((typeof cQ[cP]==="object")&&(cQ[cP])){cS[cP]=(cQ[cP].constructor===Array)?[]:{};cs(cQ[cP],cS[cP])}else{cS[cP]=cQ[cP]}}return cS}catch(cR){}}this.logMessage=function(cP,e){br(cP,e)};function br(cT,cQ){try{if(H.configURLCsmaDebug==1||H.pageURLCsmaDebug==1||H.configDebug==1){try{if(H.printException){if(cT.indexOf("Exception")!=-1){cQ="ERROR"}}}catch(cS){}try{P(cT,cQ)}catch(cP){}try{console.log(cT)}catch(cP){}}else{if(!cg){var cR={message:cT,msgType:cQ};u.push(cR)}}}catch(cP){}}function P(cQ,e){if(e==null||e==""){e="TRACE"}if(cQ==null||cQ==""){return}if(typeof AkamaiAnalytics_debugWindow_available=="function"&&AkamaiAnalytics_debugWindow_available()=="1"){AkamaiAnalytics_debugWindow_appendLog(cQ,e)}else{var cP={message:cQ,msgType:e};u.push(cP)}}function bb(){try{if(H.configURLCsmaDebug==1||H.pageURLCsmaDebug==1||H.configDebug==1){if(H.logStoredMsg){if(typeof AkamaiAnalytics_debugWindow_available=="function"&&AkamaiAnalytics_debugWindow_available()=="1"){if(H.logTimer){bE(H.logTimer)}H.logStoredMsg=false;if(u.length){for(var cP=0;cP<u.length;cP++){br(u[cP].message,u[cP].msgType)}u=[]}}else{H.logTimer=bB(bb,1000,[])}}}}catch(cQ){}}var a5,a,Y;var b0="AkamaiAnalytics_BrowserSessionId";var bn=null;var aA=null;var cl=null;var ct=null;var aO=null;var a7=null;if(navigator&&navigator.userAgent){a7=navigator.userAgent}function cb(){if(navigator&&navigator.userAgent){try{var e=navigator.userAgent;var cS=/\((\w+)/;var cQ=cS.exec(e);aA=cQ[1].toLowerCase();if(aA.indexOf("compatible")!=-1||aA.indexOf("windows")!=-1){aA="Windows"}else{if(aA.indexOf("x11")!=-1){aA="Linux"}else{if(aA.indexOf("macintosh")!=-1||aA.indexOf("mac os")!=-1||aA.indexOf("macos")!=-1){aA="Mac OS"}else{if(aA.indexOf("ipad")!=-1){aA="iPad"}else{if(aA.indexOf("iphone")!=-1){aA="iPhone"}else{if(aA.indexOf("ipod")!=-1){aA="iOS"}else{if(e.indexOf("Android")!=-1){aA="Android"}else{aA="Others"}}}}}}}}catch(cR){br("Exception,  finding Osname");aA="Others"}try{cS=/(NT|OS X|Linux|CPU.*?OS) ([0-9\._]+)/;cQ=cS.exec(e);ct=cQ[2]?cQ[2]:"";var cP=null;if(aA=="Windows"){cP=aV(ct);aA=aA+" "+cP}}catch(cR){br("Exception,  OSVersion"+cR)}}}function aV(e){var cP=null;if(e){if(e=="6.3"||e=="6.2"){cP="8"}else{if(e=="6.1"){cP="7"}else{if(e=="6.0"){cP="Vista"}else{if(e=="5.2"||e=="5.1"){cP="XP"}else{cP="Other"}}}}}return cP}function J(){if(navigator&&navigator.userAgent){var e=navigator.userAgent;var cR=/(MSIE|Chrome|Version|Firefox)[ \/]([0-9]+)/;try{var cP=cR.exec(e);bn=cP[1];if(cP[1]=="Version"){cR=/(Opera|Safari)/;var cS=cR.exec(e);bn=cS[1]}}catch(cQ){br("Exception,  browserName"+cQ)}try{br("browser version = "+cP[2]);cl=cP[2];if(bn&&cl){bn=bn+" "+cl}}catch(cQ){br("Exception,  browserVersion"+cQ)}}}function bt(){if(navigator&&navigator.userAgent){try{var cP=navigator.userAgent;cP=cP.toLowerCase();if(cP.indexOf("ipad")!=-1){aO="iPad"}else{if(cP.indexOf("iphone")!=-1){aO="iPhone"}else{if(cP.indexOf("android")!=-1){aO="Android Device"}else{if(cP.indexOf("macintosh")!=-1||cP.indexOf("windows")!=-1||cP.indexOf("compatible")!=-1){aO="Desktop"}else{aO="Others"}}}}}catch(cQ){br("Exception,  getitng device name : "+cQ);aO="Others"}}}cb();J();bt();var ce={ended:0,init:1,playing:2,pause:3,seek:4,rebuffering:5,resumeBuffering:6};function co(cP){try{switch(cP){case ce.ended:return"ended";break;case ce.init:return"init";break;case ce.playing:return"playing";break;case ce.pause:return"pause";break;case ce.seek:return"seek";break;case ce.rebuffering:return"rebuffering";break;case ce.resumeBuffering:return"resumeBuffering";break;default:return"undefined";break}}catch(cQ){}}var bs=[0,0,0,0,0,0,0,0,0,0,0,0];var z=[0,0,0,0,0,0,0,0,0,0,0,0];var f;var ar="0,0,0,0,0,0,0,0";function aU(e){if(e&&e.customMetrics){for(var cP in e.customMetrics){if(!(cP in bZ)){this[cP]=e.customMetrics[cP]}}}this.userAgent=a7;this.playerType="HTML5";this.pluginVersion=bA;this.os=aA;this.osVersion=ct;this.browser=bn;this.browserVersion=cl;this.browserSize=window.innerWidth+"x"+window.innerHeight;this.rebufferCount=0;this.bytesLoadedCallback=0;this.lastBytesLoaded=0;this.currRebufferEndEpoch=0;this.totalPlayClockTime=0;this.totalPlayStreamTime=0;this.totalRebufferCount=0;this.totalRebufferTime=0;this.totalPauseCount=0;this.totalPauseDuration=0;this.totalSeekCount=0;this.totalSeekTime=0;this.totalResumeBufferCount=0;this.totalResumeBufferTime=0;this.totalAdPlayClockTime=0;this.totalAdStartCount=0;this.totalAdAbandonCount=0;this.updateTerminateMetrics=function(){try{if(this.playClockTime){this.totalPlayClockTime+=parseInt(this.playClockTime)}if(this.playStreamTime){this.totalPlayStreamTime+=parseInt(this.playStreamTime)}if(this.rebufferCount){this.totalRebufferCount+=parseInt(this.rebufferCount)}if(this.rebufferTime){this.totalRebufferTime+=parseInt(this.rebufferTime)}if(this.pauseCount){this.totalPauseCount+=parseInt(this.pauseCount)}if(this.pauseDuration){this.totalPauseDuration+=parseInt(this.pauseDuration)}if(this.seekCount){this.totalSeekCount+=parseInt(this.seekCount)}if(this.seekTime){this.totalSeekTime+=parseInt(this.seekTime)}if(this.resumeBufferCount){this.totalResumeBufferCount+=parseInt(this.resumeBufferCount)}if(this.resumeBufferTime){this.totalResumeBufferTime+=parseInt(this.resumeBufferTime)}if(this.adPlayClockTime){this.totalAdPlayClockTime+=parseInt(this.adPlayClockTime)}if(this.adCount){this.totalAdStartCount+=parseInt(this.adCount)}if(this.adAbandonCount){this.totalAdAbandonCount+=parseInt(this.adAbandonCount)}var cQ=bI();this.startupAbondonWaitTime=cQ;this.playInterval=cQ}catch(cR){br("Unable to update cumulative metrics")}};this.clearRelativeMetrics=function(){var cQ=["rebufferCount","rebufferTime","playClockTime","playStreamTime","seekCount","seekTime","pauseCount","pauseDuration","resumeBufferCount","resumeBufferTime","averagedBitRate","transitionUpSwitchCount","transitionDownSwitchCount","rebufferSession","curRebufferTime","adCount","adPlayClockTime","adStartupTime","adAbandonCount","adPauseTime"];this.updateTerminateMetrics();for(var cR=0;cR<cQ.length;++cR){this[cQ[cR]]=0}this.pauseIntervalsAsString="-";this.seekIntervalsAsString="-";this.pauseSeekSession="-";this.transitionStreamTimeSession="-";this.socialSharing=null;this.adSession=null;bd.socialSharing=null;bd.socialSharingObj={};bU.bitRateArr=[];delete this.rebufferSession};this.populateMetricsFromConfiguration=function(){this.beaconId=aM.beaconId;this.beaconVersion=aM.beaconVersion;this.logType=(l.logType=="relative")?"R":"C";this.logVersion=l.logVersion;this.startupTimeOutlierLimit=l.startupTimeOutlierLimit;this.formatVersion=l.formatVersion;this.bucketCount=b7.bucketCount;this.bucketLength=b7.bucketLength;for(var cR in bl){if(bl[cR]){for(var cQ=0;cQ<bl[cR].length;cQ++){if(bl[cR][cQ].value){this[bl[cR][cQ].name]=bl[cR][cQ].value}}}}};this.initPlayed=function(cQ){this.played.push([cQ,cQ]);this.playingIndex=0};this.updatePlayClockTime=function(cR,cQ,cS){this.playClockTime+=cR;bU.updateBitRateArr(cR)};this.updatePlayed=function(cQ,cT){var cS=this.played;if(!cS){return}for(var cR=0;cR<cS.length;cR++){}for(var cR=this.playingIndex;cR<cS.length&&cQ>cS[cR][0];cR++){}if(cR!=this.playingIndex){cS[this.playingIndex][1]=Math.max(cQ,cS[cR-1][1]);cS.splice(this.playingIndex+1,cR-this.playingIndex-1)}else{cS[this.playingIndex][1]=Math.max(cQ,cS[this.playingIndex][1])}if(cT==null){return}for(cR=0;cR<cS.length;cR++){if(cS[cR][0]<=cT&&cS[cR][1]>=cT){this.playingIndex=cR;return}else{if((cR+1)<cS.length&&cS[cR][1]<cT&&cS[cR+1][0]>cT){cR++;this.playingIndex=cR;cS.splice(cR,0,[cT,cT]);return}}}if(cR==cS.length){cS.push([cT,cT]);this.playingIndex=cR}};this.isVisitEnd=0;this.sequenceId="0";this.isSLineSent=false;this.sendVLine=false;this.played=[];this.iLineCount=0;this.isPlaylist=false;this.isFirstTitle=1;this.currentState={state:ce.ended,lastEventClockTime:0,pauseStartStreamTime:0,pauseStartClockTime:0,timeUpdateStreamTime:0,timeUpdateClockTime:0,pollingTimerStreamTime:0,seekStartStreamPos:0};this.seekObject={seekStartEpochTime:-1,seekEndEpochTime:-1,seekStartStreamTime:-1,seekEndStreamTime:-1};this.clearRelativeMetrics();br("value of configurationPopulated"+cg);if(cg){this.populateMetricsFromConfiguration()}this.loadStartILine=false;this.canPlayUpdated=false;this.canPlayEventAutoPlay=true;this.format="P";this.playerFormat=this.playerType+":"+this.format;this.deliveryType="O";this.firstTimeProgress=true;this.firstTimePlay=true;this.isILineSent=false;this.seekFrom=0;this.lastPlayStreamTime=0;this.lastPlayLogTime=0;this.lastLogTime=0;this.curRebufferTime=0;this.sendIsSessionWithRebufferH=1}ax.akamai=new aU(ax);function ck(){try{var cQ,cP;for(cQ in bl){if(bl[cQ]){for(cP=0;cP<bl.length;cP++){if(bl[cQ][cP].isSent&&bl[cQ][cP].isSent===true){bl[cQ][cP].isSent=false}}}}}catch(cR){}}function aZ(cT){br("endOfTheSession");var cS=cT.akamai;var cU=cS.isPlaylist;var cQ=cS.visitId;var e=cS.viewerId;var cR=cS.streamName;var cW=cS.cdn;var cV=cS.sendVLine;var cP=cS.iLineCount;var cX=cS.isFirstTitle;cT.akamai=null;ck();cS=cT.akamai=new aU(cT);cS.visitId=cS.browserSessionId=cQ;cS.viewerId=cS.clientId=e;cS.cdn=cW;aC=-1;cS.streamName=cR;cS.iLineCount=cP;cT.akamai.clearVisitTimeoutId=bB(cw,l.visitTimeout,[cT,1]);cS.sendVLine=cV;cS.isFirstTitle=cX;cS.isPlaylist=cU;if(cT.played){cT.played.length=0}bU.clearBitRate()}function bi(){try{if(this.readyState==4&&this.status==200&&this.responseText){var cU=this.akamai;var cP=this.responseText.split("\n");var cW="";var cT=/PROGRAM-ID=(\d+)/;var cQ,cR;if(cP){for(cR=0;cR<cP.length;cR++){if((cQ=cT.exec(cP[cR]))){if(cQ[1]==cW){break}else{cW=cQ[1]}}}if(cR!=cP.length){cU.format="L";cU.playerFormat=cU.playerType+":"+cU.format}}cT=/^#EXT((INF)|(-X-STREAM-INF))[^\n]*\n([^\n]*)\n/m;br("Checking");if((cQ=cT.exec(this.responseText))){br("Checking done "+cQ[4]);if(/.m3u8$/.exec(cQ[4])){try{var cS=new XMLHttpRequest();cS.open("GET",cQ[4],true);cS.onreadystatechange=function(){if(this.readyState==4&&this.status==200){if(this.responseText){if(/^#EXT-X-ENDLIST/m.exec(this.responseText)){cU.deliveryType="O"}}}};if(cS.overrideMimeType){cS.overrideMimeType("text/plain")}cS.send(null)}catch(cV){br("parsePlaylist, Exception,  parsing play list, "+cV)}}else{if(/^#EXT-X-ENDLIST/m.exec(this.responseText)){cU.deliveryType="O"}}}}}catch(cV){br("Exception,  parsePlaylist : "+cV)}}var bW=["UNKNOWN","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"];function bD(e){if(bY&&bY.dataset&&bY.dataset.isad&&bY.dataset.isad=="true"){return true}else{return false}}function bK(cQ,cP,cT){if(cP=="playing"){ca=[]}var cS=bI();var cR={};cR.eventType=cP;cR.eventTime=cS;if(cT){cR.streamUrl=cT}if(cP=="error"){cR.errorCode=a4(cQ)}if(ca&&ca.length>0){var e=ca[ca.length-1];if(e.eventType==cR.eventType&&e.streamUrl==cR.streamUrl){if(cP=="error"){e.errorCode=cR.errorCode}e.eventTime=cR.eventTime}else{ca.push(cR)}}else{ca.push(cR)}}function L(cP,cW,cV){try{var cU=false;if(ca.length>0){var cR=bI();var cQ=ca[ca.length-1];br("check error events array, previous event is : "+cQ.eventType);if(cQ.eventType=="error"&&cV==cQ.streamUrl){if(cW=="error"){var cT=a4(cP);if(cQ.errorCode==cT){cU=true}else{cU=false}cQ.eventTime=cR;cQ.errorCode=cT}else{if(cW=="play"&&cQ.eventTime&&(cR-cQ.eventTime<=2000)){cU=true}}}}}catch(cS){br("Exception,  checkErrorEventsArray"+cS);cU=false}return cU}function bj(cQ){if(bD(cQ)){br("handle Seeking Event : video tag is of type AD, return");return}try{var cS=bI();var cP=parseInt(av(cQ));var cU=cQ.akamai;var cR=cU.currentState;var cX=cS-cR.lastEventClockTime;var cT=cS-cU.startTimer;var cV=cR.state;if(cR.state==ce.playing){cU.updatePlayClockTime(cX,cR.lastEventClockTime,cS)}if(cU.isPlaylist&&(cR.state==ce.ended)&&(cU.browser=="Safari")){}cR.lastEventClockTime=cS}catch(cW){br("Exception,  handle Seeking Event : "+cW)}}function U(cQ){if(bD(cQ)){br("handle Seeked Event : video tag is of type AD, return");return}try{var cS=bI();var cP=parseInt(av(cQ));var cU=cQ.akamai;var cR=cU.currentState;var cX=cS-cR.lastEventClockTime;var cT=cS-cU.startTimer;var cV=cR.state;br("entered function handle Seeked Event, currentstate = "+co(cR.state));if(cV==ce.pause||cV==ce.playing||cV==ce.rebuffering||cR.state==ce.seek){if((cS-cR.timeUpdateClockTime)>0){ao(cU,cS,cP,"S")}switch(cV){case ce.playing:cU.updatePlayed(cR.timeUpdateStreamTime,cP);cR.lastEventClockTime=cS;cU.updatePlayClockTime(cX,cR.lastEventClockTime,cS);cR.state=ce.seek;cR.seekStartStreamPos=cP;break;case ce.rebuffering:br("handle seeked event, previous state is rebuffering");cU.rebufferTime+=cX;cU.curRebufferTime+=cX;if(cU.rebufferSessionArrayHLine){cU.rebufferSessionArrayHLine.push(cS)}try{O(cU,cS);cU.curRebufferTime=0}catch(cW){br("Error...Play"+cW.message)}cR.lastEventClockTime=cS;cR.state=ce.seek;break}}}catch(cW){br("Exception,  handle Seeked Event :"+cW)}}function Z(cQ){if(bD(cQ)){br("handlePauseEvent : video tag is of type AD, return");return}try{br("entered function handle Pause Event");var cS=bI();var cP=parseInt(av(cQ));var cW=cQ.akamai;var cR=cW.currentState;var cT=B(cQ);if(cW.firstTimePlay||cR.state==ce.pause){return}if(cT&&cT!=0&&cP&&cP!=0){if(Math.abs(cT-cP)<1000){return}}var cY=cS-cR.lastEventClockTime;var cU=cS-cW.startTimer;var cV=cR.state;switch(cV){case ce.playing:cW.updatePlayClockTime(cY,cR.lastEventClockTime,cS);++cW.pauseCount;ao(cW,cS,cP,"P");if(cW.pauseSeekSession!="-"){cW.pauseSeekSession+=",P("+cP+":"+cU+")"}else{cW.pauseSeekSession="P("+cP+":"+cU+")"}cW.updatePlayed(cP);break;case ce.rebuffering:++cW.pauseCount;ao(cW,cS,cP,"P");if(cW.pauseSeekSession!="-"){cW.pauseSeekSession+=",P("+cP+":"+cU+")"}else{cW.pauseSeekSession="P("+cP+":"+cU+")"}cW.rebufferTime+=cY;cW.curRebufferTime+=cY;if(cW.rebufferSessionArrayHLine){br("handlePauseEvent : pushing, rebufferSessionArrayHLine");cW.rebufferSessionArrayHLine.push(cS)}try{O(cW,cS);cW.curRebufferTime=0}catch(cX){br("Error...Pause"+cX.message)}break}cR.state=ce.pause;cR.pauseStartStreamTime=cP;cR.pauseStartClockTime=cS;cR.lastEventClockTime=cS}catch(cX){br("Exception,  handlePauseEvent : "+cX)}}function bC(cQ){try{if(ax&&ax.akamai){br("handle bit rate switch");try{cQ=parseInt(cQ)}catch(cT){br("Exception,bit rate to int :"+cT);return}if(isNaN(cQ)){br("handle bitrate swtich, bite rate isNaN")}var cS=ax.akamai;var cR=cS.currentState;var cP=av(ax);if(bU.currentBitRate!="-"){if(cQ>bU.currentBitRate){cS.transitionUpSwitchCount++}else{if(cQ<bU.currentBitRate){cS.transitionDownSwitchCount++}}}if(cR&&cR.state==ce.playing){i(ax)}bU.currentBitRate=cQ;bU.currentStartPos=cP}}catch(cT){br("Exception, handle bit rate switch:"+cT)}}function am(cQ){if(bD(cQ)){br("handle Play Event : video tag is of type AD, return");return}try{var cY=w(cQ);if(cQ.akamai&&cQ.akamai.postRollTimer){br("handle play event: send the C line without changing set data");bE(cQ.akamai.postRollTimer);delete cQ.akamai.postRollTimer;ai(cQ)}if(!cQ.objectBased&&!cY){br("handle play event, video is null");return}if(L(cQ,"play",cY)){br("handle play Event: play is thrown after error, return, curTime = "+bI());return}bK(cQ,"play",cY);var cW=cQ.akamai;var cT=bI();var cP=parseInt(av(cQ));var cR=cW.currentState;var cZ=cT-cR.lastEventClockTime;var cU=cT-cW.startTimer;var cV=cR.state;br("entered function handle Play Event, current state = "+co(cR.state));switch(cV){case ce.ended:bP(cY,cW);cW.streamUrl=cY;cW.startTimer=cT;cW.streamLength=parseInt(B(cQ));if(cY!=null&&cY.indexOf("?")!=-1){cY=cY.substring(0,cY.indexOf("?"))}if(cY!=null&&cY!=""&&(/.m3u8$/.exec(cY))){cW.format="L";cW.playerFormat=cW.playerType+":"+cW.format;cW.deliveryType="L";try{var cS=new XMLHttpRequest();cS.akamai=cW;cS.open("GET",cY,true);cS.onreadystatechange=bi;if(cS.overrideMimeType){cS.overrideMimeType("text/plain")}cS.send(null)}catch(cX){br("handleplayEvent, Exception,  parsing play list, "+cX)}}aC=-1;cB(cQ,false);cW.currentState.state=ce.init;br(bI()+": handlePlayBackEvent : Setting state to init");cW.currentState.timeUpdateClockTime=cT;cW.currentState.timeUpdateStreamTime=0;cW.currentState.lastEventClockTime=cT;cW.isPlaylist=true;break;case ce.pause:cW.pauseDuration+=cZ;if(cW.pauseIntervalsAsString!="-"){cW.pauseIntervalsAsString+=","+cR.pauseStartStreamTime+":"+(cT-cR.pauseStartClockTime)}else{cW.pauseIntervalsAsString=cR.pauseStartStreamTime+":"+(cT-cR.pauseStartClockTime)}if(cW.pauseSeekSession!="-"){cW.pauseSeekSession+=",R("+cR.pauseStartStreamTime+":"+cU+")"}else{cW.pauseSeekSession="R("+cR.pauseStartStreamTime+":"+cU+")"}cW.updatePlayed(cR.pauseStartStreamTime,cP);cW.currentState.lastEventClockTime=cT;++cW.resumeBufferCount;cR.state=ce.resumeBuffering;break;case ce.init:if(!cW.iLineSentTime){cW.iLineSentTime=cT}if(cW.loadStartILine&&!cW.canPlayEventAutoPlay&&!cW.canPlayUpdated){cW.iLineSentTime=cT;cW.canPlayUpdated=true}break}}catch(cX){br("Exception,  handle Play Event:"+cX)}}function i(cQ){if(bD(cQ)){br("handle Playing Event : video tag is of type AD, return");return}try{var cS=bI();var cX=w(ax);if(!cQ.objectBased&&!cX){br("handle playing event, video is null");return}bK(cQ,"playing",cX);var cP=parseInt(av(cQ));var cV=cQ.akamai;var cR=cV.currentState;var cY=cS-cR.lastEventClockTime;var cT=cS-cV.startTimer;var cU=cR.state;br("entered function handle Playing Event, current State = "+co(cR.state));switch(cU){case ce.rebuffering:cV.rebufferTime+=cY;cV.curRebufferTime+=cY;if(cV.rebufferSessionArrayHLine){cV.rebufferSessionArrayHLine.push(cS)}try{O(cV,cS);cV.curRebufferTime=0}catch(cW){br("Error...Play"+cW.message)}break;case ce.pause:case ce.resumeBuffering:cV.resumeBufferTime+=cY;if(cY==0&&cV.resumeBufferCount>0){--cV.resumeBufferCount}break;case ce.init:r(cQ,cY,cS,cP);bU.currentStartPos=cP;break;case ce.ended:br("handle Playing Event : dispatch play and playing event");am(cQ);i(cQ);break;case ce.playing:cV.updatePlayClockTime(cY,cR.lastEventClockTime,cS);break;case ce.seek:if((cS-cR.timeUpdateClockTime)>0){ao(cV,cS,cP,"S");cV.updatePlayed(cR.seekStartStreamPos,cP)}break}cR.state=ce.playing;cR.lastEventClockTime=cS}catch(cW){br("Exception,  handle Playing Event:"+cW)}}function C(cQ){if(bD(cQ)){br("handleWaitingEvent : video tag is of type AD, return");return}try{var cU=cQ.akamai;if(cU.currentState.state==ce.rebuffering){br("already inside handleWaiting Event");return}var cS=bI();var cP=parseInt(av(cQ));var cR=cU.currentState;var cX=cS-cR.lastEventClockTime;var cT=cS-cU.startTimer;var cV=cR.state;br("entered function handle Waiting Event, current state = "+co(cR.state));switch(cV){case ce.playing:cU.updatePlayClockTime(cX,cR.lastEventClockTime,cS);++cU.rebufferCount;if(cU.rebufferCount==1&&cU.playerState!="B"){cU.firstRebufferStartEpoch=Math.round(cS)}if(cU.rebufferSessionArrayHLine){br("handleWaitingEvent : pushing, rebufferSessionArrayHLine"+cS);cU.rebufferSessionArrayHLine.push(cS)}cU.updatePlayed(cP);cR.state=ce.rebuffering;break;case ce.pause:++cU.resumeBufferCount;cR.state=ce.resumeBuffering;break;case ce.init:break}cR.lastEventClockTime=cS;br("handle waiting event, if now seek starts, stream pos = "+cP);cR.seekStartStreamPos=cP}catch(cW){br("Exception,  handleWaitingEvent:"+cW)}}function p(e){if(bD(e)){br("handleAbortEvent : video tag is of type AD, return");return}N(e)}function N(cQ){if(bD(cQ)){br("handle Error Event : video tag is of type AD, return");return}try{var cZ=w(cQ);if(!cQ.objectBased&&!cZ){br("handle error event, video is null");return}if(L(cQ,"error",cZ)){br("handle Error Event: consecutive error events thrown, return, curTime = "+bI());return}if(cQ&&cQ.akamai&&!cQ.akamai.isILineSent){br("handle Error Event: calling handle Play Event");am(cQ)}bK(cQ,"error",cZ);var cS=bI();var cP=parseInt(av(cQ));var cV=cQ.akamai;var cR=cV.currentState;var c0=cS-cR.lastEventClockTime;var cT=cS-cV.startTimer;var cU=cR.state;br("entered function handle Error Event, current state = "+co(cR.state));if(cR.state==ce.playing){cV.updatePlayClockTime(c0,cR.lastEventClockTime,cS)}if(cV.isELineSent||cV.isCLineSent){return}var cY=a4(cQ);g(cQ,cY);cR.state=ce.ended;var cX=parseInt(y("HTML_LastCLineTime"));aZ(cQ);cR.lastEventClockTime=cS}catch(cW){br("Exception,  handleErrorEvent:"+cW)}}function bz(cR){if(bD(cR)){br("handle Ended Event WithDelay : video tag is of type AD, return");return}try{var cT=cR.akamai;var cQ=cT.currentState;br("entered function handle Ended Event WithDelay, current state"+co(cQ.state));var cS=bI();var cP=cS-cQ.lastEventClockTime;if(cT.pollingTimer){bE(cT.pollingTimer)}if(bM&&bM.retryTimer){bE(bM.retryTimer)}if(cT.hLineTimer){bE(cT.hLineTimer)}if(cT.fastTCPServerIpTimer){bE(cT.fastTCPServerIpTimer)}if(cT.firstPLineTimer){bE(cT.firstPLineTimer)}if(bM&&bM.retryTimer){bE(bM.retryTimer)}if(cT.postRollTimer){br("handle Ended Event WithDelay: postRollTimer already started return");return}cj(cT,"complete");bu(cT);cT.postRollTimer=bB(ai,1000,[cR]);b2(cT);cT.customDataPopulated=true;b4(cT,cS);aY(cR,cP,cS,true);cT.playEndMetricsUpdated=true}catch(cU){br("Exception,  handle Ended Event WithDelay"+cU);ai(cR)}}function ai(cQ){try{var cV=cQ.akamai;if(cV.postRollTimer){bE(cV.postRollTimer);delete cV.postRollTimer}if(cV.firstTimePlay||cV.isELineSent||cV.isCLineSent){br("handle Ended Event : already sent C line, return");return}var cT=bI();var cP=parseInt(av(cQ));var cR=cV.currentState;var cZ=cT-cR.lastEventClockTime;var cU=cT-cV.startTimer;var cW=cR.state;br("entered function handle Ended Event, current state"+co(cR.state));if(!cV.playEndMetricsUpdated){aY(cQ,cZ,cT,true);cV.playEndMetricsUpdated=true}cR.state=ce.ended;var cS=aa(cQ);if(cV.streamTitleSwitchReason!=null&&cV.streamTitleSwitchReason!=""){cS=cV.streamTitleSwitchReason}bq(cQ,cS,false);var cY=parseInt(y("HTML_LastCLineTime"));aZ(cQ);cR.lastEventClockTime=cT}catch(cX){br("Exception,  handle Ended Event :"+cX)}}this.getViewerId=function(){try{var cP=ax.akamai;if(cP&&cP.viewerId){return cP.viewerId}else{return null}}catch(cQ){return null}};this.setData=function(e,cP){a3(e,cP)};this.handleStreamSwitch=function(){ci()};this.handleTitleSwitch=function(e){cp(e)};this.handleFeedbackEvent=function(){aw()};this.handleApplicationExit=function(){aP()};function a3(cP,cQ){try{br("Set Data("+cP+":"+cQ+")");if(cP=="customDataObject"){bL(cQ)}else{if(cP=="customDataFunction"){bc=cQ}else{if(cP=="viewerId"||cP=="viewerDiagnosticsId"){if(cQ==null||cQ==""){cQ="-"}}try{if(cP.indexOf("std:")!=-1){R[cP.substring(4)]=cQ}else{a1[cP]=cQ}}catch(cR){a1[cP]=cQ}if((cP.indexOf("socialShare:")!=-1)||(cP.indexOf("feedback:")!=-1)){aw()}}}}catch(cR){br("Exception, Set Data :"+cR)}}function bL(cP){try{if(typeof(cP)=="object"){for(var cQ in cP){a3(cQ,cP[cQ])}}}catch(cR){br("Exception set custom data object"+cR)}}function ci(){var e=ax.akamai;e.streamTitleSwitchReason="Stream.Switched";ai(ax)}function cp(cQ){var cR=ax.akamai;cR.streamTitleSwitchReason="Title.Switched";ai(ax);try{if(cQ!=null&&cQ!=""){for(var cP in cQ){a3(cP,cQ[cP])}}}catch(cS){br("Exception, handle title switch:"+cS)}am(ax);i(ax);try{ax.akamai.currentState.timeUpdateStreamTime=parseInt(av(ax))}catch(cS){br("Exception,  handleTitleSwitch"+cS)}}function aw(){try{var cU="feedback:";var cP=cU.length;var cT=false;for(var cR in a1){if(cR.indexOf(cU)!=-1){var cQ=cR.substring(cP);a1[cQ]=a1[cR];delete a1[cR];cT=true}}s();br("handleFeedbackEvent");if(bd&&bd.shouldSendFLine&&bd.akamai&&(bd.akamai.isCLineSent||bd.akamai.postRollTimer)){if(cT){bd.akamai.customDataChanged=true}if(bd.fLineCount<bd.limit){q(bd,"feedback",false)}++bd.fLineCount;bd.akamai.customDataChanged=false;bd.akamai.socialSharing=null}}catch(cS){br("Exception, handle feed back event :"+cS)}}function aP(){try{if(!ax.objectBased){br("application exit, unsubscribe video events");cm(ax)}}catch(cP){}aW()}function ae(cQ){if(bD(cQ)){return}try{if(af){br("handle time update event, return as inside background state for idevice");return}var cS=bI();var cP=parseInt(av(cQ));var cV=cQ.akamai;if(!cV){return}if(cV.postRollTimer){return}var cR=cV.currentState;var cY=cS-cR.lastEventClockTime;var cU=cS-cV.startTimer;var cW=cR.state;var cT=cP-cR.timeUpdateStreamTime;if(Math.abs(cT)>=1000&&cV.isSLineSent){U(cQ)}else{if((cT>0)&&(cT<=750)){if(cQ.objectBased){if(cR.state==ce.seek){i(cQ)}}else{if(!cV.isSLineSent||cR.state==ce.seek||cR.state==ce.rebuffering){br("handle time update event,  dispatching playing event,  current Video state is : "+co(cR.state));i(cQ)}}}}cR.timeUpdateClockTime=cS;cR.timeUpdateStreamTime=cP}catch(cX){br("Exception,  handleTimeupddate :"+cX)}}this.handleSessionInit=function(cP){try{if(cP){if(typeof cc!="object"){cc={}}if(cP.streamHeadPosition){cc.streamHeadPosition=cP.streamHeadPosition}if(cP.streamLength){cc.streamLength=cP.streamLength}if(cP.streamURL){cc.streamURL=cP.streamURL}if(cP.bytesLoaded){cc.bytesLoaded=cP.bytesLoaded}if(cP.customDataFunction){cc.customDataFunction=cP.customDataFunction}if(cc.customDataFunction){bc=cc.customDataFunction}if(cP.firstBitRate){cc.firstBitRate=cP.firstBitRate}if(cc.firstBitRate){bC(cc.firstBitRate)}}am(ax)}catch(cQ){}};this.handleBitRateSwitch=function(e){bC(e)};this.handlePlaying=function(){am(ax);i(ax)};this.handlePlayEnd=function(e){if(ax.objectBased){ax.endReason=e}bz(ax)};this.handleMediaChangedEvent=function(){ai(ax)};this.handlePause=function(){Z(ax)};this.handleResume=function(){am(ax);i(ax)};this.handleBufferStart=function(){C(ax)};this.handleBufferEnd=function(){am(ax);i(ax)};this.handleError=function(cP){try{if(ax.objectBased){ax.errorReason=cP}N(ax)}catch(cQ){}};this.handleTimeupdateEvent=function(){ae(ax)};this.updateAdObject=function(e){bf(e)};this.handleAdLoaded=function(cP){try{be(cP)}catch(cQ){}};this.handleAdStarted=function(e){aN(e)};this.handleAdCompleted=function(){G()};this.handleAdFirstQuartile=function(){cE()};this.handleAdMidPoint=function(){b()};this.handleAdThirdQuartile=function(){b3()};this.handleAdStopped=function(){k()};this.handleAdError=function(){aG()};this.handleSetupAISEvent=function(e,cP,cQ){ba(e,cP,cQ)};function ba(cP,cR,cT){try{var cQ=bM.aisRequestLimit;var cS=bM.aisRequestInterval;bM=new ah();bM.aisRequestInterval=cS;bM.aisRequestLimit=cQ;if(!cP){br("return from ais, platform is null");return}bM.platform=cP;bM.version=cR?cR:"1.0";if(cT){bM.aisCustomDataObj=cT}bM.requestUrl="http://idp.securetve.com/rest/";bM.initUrl=bM.requestUrl+bM.version+"/"+bM.platform+"/init/?format=jsonp&responsefield=akaMediaAnalytics.receiveAISInitRequest";bM.identityUrl=bM.requestUrl+bM.version+"/"+bM.platform+"/identity/?format=jsonp&responsefield=akaMediaAnalytics.receiveAISIdentityRequest";bM.initUrlId="AkamaiAISInitUrl";bM.identityUrlId="AkamaiAISIdentityUrl";o(bM.initUrl,bM.initUrlId)}catch(cU){bM.requestFailed=true}}this.receiveAISInitRequest=function(cR){try{bM.initObj=cR;an(bM.initUrlId);if(bM.initObj==""||bM.initObj==null){bM.requestFailed=true;return}if(bM.requestFailed){return}if(bM.initObj.authenticated){bM.akamai={};bM.akamai.ais_queryToken=bM.initObj.querytoken;if(bM.initObj.idps){var cS=bM.initObj.idps;for(var cP in cS){bM.akamai.ais_idpId=cP;bM.akamai.ais_idpName=cS[cP].name;bM.akamai.ais_idpDisplayName=cS[cP].display_name;bM.akamai.ais_idpUrl=cS[cP].url}}o(bM.identityUrl,bM.identityUrlId)}else{if(!bM.requestFailed){br("receiveAISInitRequest, retrying the request");++bM.aisRetries;if(bM.aisRetries<bM.aisRequestLimit){bM.retryTimer=bB(o,bM.aisRequestInterval,[bM.initUrl,bM.initUrlId])}}}}catch(cQ){bM.requestFailed=true}};this.receiveAISIdentityRequest=function(cQ){try{bM.identityObj=cQ;an(bM.identityUrlId);if(cQ==null||cQ==""){return}if(!bM.akamai){bM.akamai={}}if(cQ.indentity&&cQ.identity.aisuid){bM.akamai.ais_aisuid=cQ.identity.aisuid}cq()}catch(cP){bM.requestFailed=true}};function cq(){var cQ={};var cS;var cR;try{if(bM&&bM.aisCustomDataObj){if(!bM.akamai){bM.akamai={}}for(var cP in bM.aisCustomDataObj){cS=bM.aisCustomDataObj[cP].split("/");if(cS[0]=="INIT"&&bM.initObj){cQ=bM.initObj}else{if(cS[0]=="IDENTITY"&&bM.identityObj){cQ=bM.identityObj}}if(cQ){for(cR=1;cR<cS.length;cR++){if(cS[cR]&&cQ[cS[cR]]){cQ=cQ[cS[cR]]}}if(typeof(cQ)!="object"){bM.akamai[cP]=cQ}}}}}catch(cT){br("Exception,  populateAISCustomData"+cT)}}function o(cQ,cS){try{var cP=document.createElement("script");cP.setAttribute("src",cQ);cP.id=cS;document.getElementsByTagName("head")[0].appendChild(cP)}catch(cR){br("Exception,  loading JavaScript File "+cQ)}}function an(cR){try{var cP=document.getElementById(cR);cP.parentNode.removeChild(cP)}catch(cQ){br("Exception,  removing script with id "+cR)}}function cn(cP){var cQ,e;cQ=cP.akamai;cQ.pollingTimer=bB(cn,F,[cP]);if(cP){if(cP.isBrightcoveVideo){akamaiBCVideoModule.getVideoPosition(false,ak)}else{ak(0,cP)}}}function ak(e,cR){var cT,cP;var cS=bI();if(ax!=null&&ax.isBrightcoveVideo){ax.currentTime=parseInt(e);cP=parseInt(e*1000);cR=ax}else{cP=parseInt(av(cR))}if(cP=="undefined"||isNaN(cP)||cP==""){return}cT=cR.akamai;var cQ=cT.currentState;if(cQ.state==ce.ended){return}if(cR.objectBased){ae(cR)}else{if(cQ.state==ce.pause||cQ.state==ce.seek){return}if((cP!=0)&&(cP===cQ.pollingTimerStreamTime)&&(cQ.state!=ce.rebuffering)){br("check stream head position, call handle waiting event");C(cR)}else{cQ.pollingTimerStreamTime=cP}}}function av(cQ){var cP=0;try{if(cQ.objectBased){if(cc&&cc.streamHeadPosition){cP=cc.streamHeadPosition();cQ.currentTime=cP}}else{if(bY.currentTime){cP=bY.currentTime;cQ.currentTime=cP}}}catch(cR){}if(cP==0&&aC!=-1){cP=aC}if(cP!=0){aC=cP}return(cP*1000)}function B(cP){var cR=0;try{if(cP){if(cP.objectBased){if(cc&&cc.streamLength){cR=cc.streamLength();cP.duration=cR}}else{cR=bY.duration;cP.duration=cR}}}catch(cQ){}return(cR*1000)}function w(cQ){var cP="";try{if(cQ){if(cQ.objectBased){if(cc&&cc.streamURL){cP=cc.streamURL();cQ.currentSrc=cP}}else{cP=bY.currentSrc;cQ.currentSrc=cP}}}catch(cR){}return cP}function bS(cR){var cP=0,cQ=0;try{if(cR){if(cR.objectBased){if(cc&&cc.bytesLoaded){cP=parseInt(cc.bytesLoaded());cQ=cP-cR.akamai.lastBytesLoaded}}}}catch(cS){}cR.akamai.lastBytesLoaded=cP;if(cQ>0){return cQ}}function ay(cQ){try{var cP={};if(bc!=null){cP=bc();bL(cP)}}catch(cR){}}function be(cP){try{br("handle Ad loaded");var cR=ax.akamai;var cQ=bI();x.clearAdAnalytics();x.isAdLoaded=true;x.adLoadTime=cQ;x.adCount=1;if(cR.postRollTimer){bm(ax);bE(cR.postRollTimer);cR.postRollAd=true;cR.customDataPopulated=false;x.type=2}else{if(cR.isILineSent){if(cR.isSLineSent){Z(ax);x.type=1}else{if(!cR.isSLineSent){if(!cR.adLoadTime){cR.adLoadTime=cQ}}}}}bf(cP);if(!cR.isILineSent){aj(false)}}catch(cS){br("Exception,handle ad loaded:"+cS)}}function aN(cP){try{br("handle Ad Started");var cQ=bI();x.isAdStarted=true;if(!x.isAdLoaded){be(cP)}x.playBucket=0;x.adStartTime=cQ;x.adStartupTime=cQ-x.adLoadTime;x.startPos=av(ax);bf(cP)}catch(cR){br("Exception,handle ad started:"+cR)}}function G(){try{br("handleAdEnded");x.playBucket="4";bJ("0")}catch(cP){br("Exception,handle ad completed:"+cP)}}function cE(){x.playBucket="1"}function b(){x.playBucket="2"}function b3(){x.playBucket="3"}function k(){bJ("1")}function aG(){bJ("3")}function bf(cQ){try{var cR=x.setDataArr;br("populate ad metric");for(var cP=0;cP<cR.length;cP++){if(cR[cP] in cQ){x[cR[cP]]=cQ[cR[cP]]}}}catch(cS){}}function bJ(cR){try{var cT=bI();var cS=ax.akamai;x.endStatus=cR;if(cR!="0"){x.adAbandonCount=1}if(x.isAdLoaded&&x.isAdStarted){x.adPlayClockTime=cT-x.adStartTime}x.adSession=ap();var cP=["adStartupTime","adCount","adPlayClockTime","adAbandonCount"];for(var cQ=0;cQ<cP.length;cQ++){cS[cP[cQ]]+=x[cP[cQ]]}if(cS.adSession){cS.adSession+=","+x.adSession}else{cS.adSession=x.adSession}x.isAdStarted=false;x.isAdLoaded=false;if(cR!="2"){if(cS){if(cS.postRollAd){cS.postRollAd=null;ai(ax)}else{if(cS.isSLineSent){am(ax);i(ax)}else{if(!cS.isSLineSent){cS.adEndTime=cT}}}}}}catch(cU){br("Exception,populate ad end:"+cU)}}function ap(){var cP="";var cQ=["adId","type","startPos","adStartupTime","adPlayClockTime","playBucket","endStatus","adDuration","adTitle","adCategory","adPartnerId","adServer","adDaypart","adIndustryCategory","adEvent"];try{for(var cR=0;cR<cQ.length;cR++){if((x[cQ[cR]]==0)||(x[cQ[cR]]!=null&&x[cQ[cR]]!="")){cP+=x[cQ[cR]]+":"}else{cP+=":"}}cP=cP.substring(0,cP.length-1)}catch(cS){}return cP}function aS(cP){try{if(bD(cP)){return}var cQ=cP.akamai;if(cQ.firstTimeProgress){}}catch(cR){}}function aF(cP){try{if(bD(cP)){return}var cQ=cP.akamai;if(bY.autoplay){am(cP);cQ.loadStartILine=true}}catch(cR){}}function b5(cP){try{if(bD(cP)){return}var cQ=cP.akamai;if(bY.autoplay){cQ.canPlayEventAutoPlay=true}else{cQ.canPlayEventAutoPlay=false}}catch(cR){}}function bQ(cP){try{if(bD(cP)){return}var cQ=cP.akamai;if(cQ.firstTimeProgress){cQ.firstTimeProgress=false}if(cQ.logType=="R"){}}catch(cR){}}function cO(cP){try{if(bD(cP)){return}var cQ=cP.akamai;cQ.streamLength=parseInt(B(cP))}catch(cR){}}this.subscribeVideoObject=function(cP){try{if(cP){T(cP)}}catch(cQ){}};function T(cQ){br("subscribeToEvents : video = "+cQ);var cP=["abort","error","play","pause","playing","waiting","seeking","seeked","ended","timeupdate"];var cS=["progress","load","durationchange"];bY=cQ;try{cQ.addEventListener("play",bw.play=function(){am(ax)},false);cQ.addEventListener("pause",bw.pause=function(){Z(ax)},false);cQ.addEventListener("error",bw.error=function(){N(ax)},false);cQ.addEventListener("ended",bw.ended=function(){bz(ax)},false);cQ.addEventListener("playing",bw.playing=function(){i(ax)},false);cQ.addEventListener("waiting",bw.waiting=function(){C(ax)},false);cQ.addEventListener("timeupdate",bw.timeupdate=function(){ae(ax)},false);cQ.addEventListener("load",bw.load=function(){aS(ax)},false);cQ.addEventListener("progress",bw.progress=function(){bQ(ax)},false);cQ.addEventListener("durationchange",bw.durationchange=function(){cO(ax)},false);cQ.addEventListener("canplay",bw.canplay=function(){b5(ax)},false);cQ.addEventListener("loadstart",bw.loadstart=function(){aF(ax)},false);br("subscribed to events completed")}catch(cR){br("Exception,  subscribeToEvents,unable to add listeners to video tag :"+cR)}}function cm(cP){try{cP.removeEventListener("play",bw.play,false);cP.removeEventListener("pause",bw.pause,false);cP.removeEventListener("error",bw.error,false);cP.removeEventListener("ended",bw.ended,false);cP.removeEventListener("playing",bw.playing,false);cP.removeEventListener("waiting",bw.waiting,false);cP.removeEventListener("timeupdate",bw.timeupdate,false);cP.removeEventListener("load",bw.load,false);cP.removeEventListener("progress",bw.progress,false);cP.removeEventListener("durationchange",bw.durationchange,false);cP.removeEventListener("canplay",bw.canplay,false);cP.removeEventListener("loadstart",bw.loadstart,false)}catch(cQ){br("Exception, unSubscribeFrom Events:"+cQ)}}function bh(cR){try{if(typeof(akamaiBCVideoObject)!="undefined"){bY=akamaiBCVideoObject;ax.isBrightcoveVideo=true;initBrightcove()}else{if(ax.objectBased||ax.videoPassed){}else{if(document){var cQ=document.getElementsByTagName("video");br("add MediaEvent Listeners : videos.length "+cQ.length);if(cQ&&cQ.length==0){cQ=document.getElementsByTagName("audio")}for(var cP=0;cP<cQ.length;++cP){T(cQ[cP])}document.addEventListener("DOMNodeInserted",aB,false);document.addEventListener("DOMNodeRemoved",aB,false);document.addEventListener("DOMAttrModified",aB,false)}}}if(cR&&cR.type=="DOMContentLoaded"){document.removeEventListener("load",bh,true)}}catch(cS){br("Exception,  add MediaEvent Listeners :"+cS)}}function aB(e){var cP=e.target;if(cP.nodeType==cP.COMMENT_NODE||cP.tagName==null||(cP.tagName.toLowerCase()!="video"&&cP.tagName.toLowerCase()!="audio")){return}switch(e.type){case"DOMNodeRemoved":if(cP.dataset&&cP.dataset.isad&&cP.dataset.isad=="true"){}else{cw(ax,0)}break;case"DOMNodeInserted":T(cP);break}}function cw(cQ,cZ){br("handle Video Unload");var cU=cQ.akamai;var cT=parseInt(y("HTML_VisitCountCookie"));a6.browserClose=true;try{if(cU&&cU.currentState.state>=ce.init&&cZ==0){if(!cU.firstTimePlay){if(cU.isELineSent||cU.isCLineSent){return}var cR="Browser.Close";if(cU.postRollTimer){bE(cU.postRollTimer);delete cU.postRollTimer}bq(cQ,cR,true)}else{if(cU.isELineSent||cU.isCLineSent){return}var cX="Browser.Refresh.NoStart";if((bI()-cU.startTimer)>l.initBrowserCloseTime){cX="Browser.Refresh.NoStart.Late"}g(cQ,cX,true)}}}catch(cV){}try{var cY=parseInt(y("HTML_LastCLineTime"));var cS=bI();var cW=(cY+l.visitTimeout)-cS;var cP=parseInt(y("HTML_isPlayingCount"));br("handle Video Unload: playing cookie =  "+cP+", visit cookie :"+cT);if(cT>=1&&cZ==1){if(cW>0){bE(cU.clearVisitTimeoutId);cQ.akamai.clearVisitTimeoutId=bB(cw,cW,[cQ,1]);return}else{if(cW<=0&&cT>1&&cP>0){bE(cU.clearVisitTimeoutId);cQ.akamai.clearVisitTimeoutId=bB(cw,l.visitTimeout,[cQ,1]);return}}}br("handle Video Unload: decrementing HTML_VisitCountCookie");cT=cT-1;a8("HTML_VisitCountCookie",cT);var cT=parseInt(y("HTML_VisitCountCookie"));if(cT===0||isNaN(cT)){if(cU.sendVLine){ag(cQ)}}}catch(cV){}}function aW(){try{if(x.isAdLoaded){bJ("2")}}catch(cP){}cw(ax,0)}function cH(cP){br("handlePagehide");af=true;aW()}function cA(cP){br("handlePageshow:");try{if(ax&&ax.tagName){br("handlePageShow: media tag is :"+ax.tagName);if(ax.akamai&&af){br("handlePageshow: send play and playing on timeupdate");K=true}}}catch(cP){br("Exception,  handlePagehsow : "+cP)}af=false}function y(cQ){var cP=cQ+"=";var cS="";try{if(document.cookie.length>0){offset=document.cookie.indexOf(cP);if(offset!=-1){offset+=cP.length;end=document.cookie.indexOf(";",offset);if(end==-1){end=document.cookie.length}cS=document.cookie.substring(offset,end)}}}catch(cR){}return cS}function Q(cP){try{var cT=location.pathname.split("/");var cS=" path=";document.cookie=cP+"=; expires=Thu, 01-Jan-70 00:00:01 GMT;";for(var cQ=0;cQ<cT.length;cQ++){cS+=((cS.substr(-1)!="/")?"/":"")+cT[cQ];document.cookie=cP+"=; expires=Thu, 01-Jan-70 00:00:01 GMT;"+cS+";"}}catch(cR){}}function a8(cP,cQ){try{if(document){document.cookie=cP+"="+cQ+";Path=/;"}}catch(cR){}}function cy(){try{if(aA=="iPad"||aA=="iPhone"){return true}}catch(cP){return false}}function M(){try{if(ax.objectBased||ax.videoPassed){bh()}else{br("adding MediaEventListeners: DOMContentLoaded");document.addEventListener("DOMContentLoaded",bh,false);br("adding MediaEventListeners: Load");document.addEventListener("load",bh,true)}}catch(cP){br("Exception,  Addding DOMContentLoaded and Load event listeners :"+cP)}if(window){if(cy()){window.addEventListener("pagehide",cH,false);window.addEventListener("pageshow",cA,false)}else{if(typeof(akamaiBCVideoObject)!="undefined"&&window.addEventListener){window.addEventListener("beforeunload",aW,false)}else{if(window.addEventListener){try{if(bp()){window.parent.addEventListener("beforeunload",aW,false)}else{window.addEventListener("beforeunload",aW,false)}}catch(cP){br("Exception, add window document listeners : "+cP);window.addEventListener("beforeunload",aW,false)}}else{if(window.attachEvent){try{if(bp()){window.parent.attachEvent("onbeforeunload",aW)}else{window.attachEvent("onbeforeunload",aW)}}catch(cP){window.attachEvent("onbeforeunload",aW)}}}}}}}M()}if(typeof(akamaiBCVideoObject)!="undefined"){akaMediaAnalytics=new AkaHTML5MediaAnalytics(null)}else{if(typeof(AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH)!="undefined"){if((AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH.indexOf("enableGenericAPI=1")==-1&&AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH.indexOf("subscribeVideo")==-1)){akaMediaAnalytics=new AkaHTML5MediaAnalytics(null)}}}function setAkamaiMediaAnalyticsData(b,c,a){try{if(akaMediaAnalytics){akaMediaAnalytics.setData(b,c)}}catch(d){}}function akamaiGetViewerId(){try{var b=null;if(akaMediaAnalytics){b=akaMediaAnalytics.getViewerId()}}catch(a){}return b}function akamaiSetViewerId(a){if(a==null||a==""){a="-"}setAkamaiMediaAnalyticsData("viewerId",a);setAkamaiMediaAnalyticsData("clientId",a)}function akamaiSetViewerDiagnosticsId(a){if(a==null||a==""){a="-"}setAkamaiMediaAnalyticsData("viewerDiagnosticsId",a)}function akamaiUpdateAdObject(a){if(akaMediaAnalytics){akaMediaAnalytics.updateAdObject(a)}}function akamaiHandleAdStarted(a){if(akaMediaAnalytics){akaMediaAnalytics.handleAdStarted(a)}}function akamaiHandleAdCompleted(){if(akaMediaAnalytics){akaMediaAnalytics.handleAdCompleted()}}function akamaiHandleAdLoaded(a){if(akaMediaAnalytics){akaMediaAnalytics.handleAdLoaded(a)}}function akamaiHandleAdFirstQuartile(){if(akaMediaAnalytics){akaMediaAnalytics.handleAdFirstQuartile()}}function akamaiHandleAdMidPoint(){if(akaMediaAnalytics){akaMediaAnalytics.handleAdMidPoint()}}function akamaiHandleAdThirdQuartile(){if(akaMediaAnalytics){akaMediaAnalytics.handleAdThirdQuartile()}}function akamaiHandleAdError(){if(akaMediaAnalytics){akaMediaAnalytics.handleAdError()}}function akamaiHandleAdStopped(){if(akaMediaAnalytics){akaMediaAnalytics.handleAdStopped()}}function akamaiHandleStreamSwitch(){if(akaMediaAnalytics){akaMediaAnalytics.handleStreamSwitch()}}function akamaiHandleTitleSwitch(a){if(akaMediaAnalytics){akaMediaAnalytics.handleTitleSwitch(a)}}function akamaiSetupAIS(a,b,c){if(akaMediaAnalytics){akaMediaAnalytics.handleSetupAISEvent(a,b,c)}}function akamaiHandleBitRateSwitch(a){if(akaMediaAnalytics){akaMediaAnalytics.handleBitRateSwitch(a)}}function akamaiHandleApplicationExit(){if(akaMediaAnalytics){akaMediaAnalytics.handleApplicationExit()}}function akamaiSetVideoObject(a){if(akaMediaAnalytics){akaMediaAnalytics.subscribeVideoObject(a)}}function akamaiSubscribeVideoObject(a){if(akaMediaAnalytics){akaMediaAnalytics.subscribeVideoObject(a)}};